{"version":3,"sources":["../../src/RamachandranComponent.js"],"names":["Object","defineProperty","exports","value","d3","require","polymer_element_js_1","HeatMapContours_1","LineContours_1","parsePdb_1","RamachandranComponent","height","width","createChart","bind","fillColorFunction","parsedPdb","pdbIds","forEach","pdbId","pdb","default","downloadAndParse","push","rsrz","outliersType","outlDict","outliersList","residuesOnCanvas","pdbRedo","json","parse","hiddenResidues","selectedResidues","ramaContourPlotType","contourColoringStyle","residueColorStyle","modelsToShowNumbers","modelsToShow","map","d","parseInt","objSize","window","screen","availWidth","symbolTypes","circle","symbol","type","symbolCircle","size","triangle","symbolTriangle","timeoutId","currentTime","lastTimeChanged","highlightedResidues","lastSelection","tooltipHeight","tooltipWidth","newValue","oldValue","length","updateChart","chainsToShow","select","text","xScale","scaleLinear","domain","range","xBottomAxis","axisBottom","xTopAxis","axisTop","xValue","xMap","tooltip","append","attr","style","tooltip2","yScale","yLeftAxis","axisLeft","yRightAxis","axisRight","yValue","yMap","makeYGridlines","makeXGridlines","svgContainer","classed","canvasContainer","call","tickSize","selectAll","remove","colorSelect","on","property","changeResiduesColors","addSummaryInfo","plotTypeSelect","baseContours","ramaForm","chainsString","chain","toString","indexOf","slice","modelsString","model","entryInfo","chainsInfo","modelsInfo","addEventListeners","allowed","favored","clashes","sideChainOutliers","ramachandranOutliers","rsrzCount","onMouseOutResidue","onMouseOverResidue","switchPlotType","residue","aa","prePro","cisPeptide","filterModels","residues","molecules","molecule","chains","chainId","models","modelId","rama","templatePdbResidues","sort","residue1","residue2","num","templatePdb","addResiduesToCanvas","data","enter","id","authorResNum","computeStats","idSelector","phi","psi","merge","computeOpacity","node","opacity","clearTimeout","otherResidues","index","concat","getDistance","point1","point2","xs","ys","Math","sqrt","distantResidues","templateResidue","replace","empty","otherResidue","transition","String","clickEvents","mouseOutEvents","scrollTimer","lastScrollFireTime","unHighlightObject","event","eventData","getResidueNode","changeObjectSize","duration","onClick","res","pop","residueName","entityId","residueNumber","highLightObject","addEventListener","minMouseOverTime","now","Date","getTime","mouseOver","includes","setTimeout","detail","filter","begin","end","resArrayLength","pdbID","toFixed","drawingType","residueColor","changeCont","highlightColor","dispatchCustomEvent","changeContours","html","tooltipText","tempStr","outlierTypeHelper","pageX","pageY","changeCount","outTime","dat","resArray","jsonObject","a","b","outliersTable","sortedTable","rows","exit","cells","contourColorStyle","clearCanvas","img","Image","svgImg","src","generalContour","lineGeneralContour","ileVal","lineIleVal","linePrePro","gly","lineGly","transPro","lineTransPro","cisPro","lineCisPro","context","getContext","clearRect","globalAlpha","onload","drawImage","undefined","outlTypeHelper","fillColor","changeOpacity","name","CustomEvent","entry","dispatchEvent","toDefault","getTimeout","toUpperCase","smaller","residuesString","makeInvisible","split","nodes","firstRun","each","line","Array","reflectToAttribute","notify","observer","Number","PolymerElement","customElements","define"],"mappings":"AAAA;;;;;;;;;;;;AACAA,OAAOC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C,EAAEC,OAAO,IAAT,EAA7C;AACA,IAAMC,KAAKC,QAAQ,IAAR,CAAX;AACA,IAAMC,uBAAuBD,QAAQ,qCAAR,CAA7B;AACA,IAAME,oBAAoBF,QAAQ,6BAAR,CAA1B;AACA,IAAMG,iBAAiBH,QAAQ,0BAAR,CAAvB;AACAA,QAAQ,kCAAR;AACAA,QAAQ,qBAAR;AACAA,QAAQ,wBAAR;AACA,IAAMI,aAAaJ,QAAQ,YAAR,CAAnB;;IACMK,qB;;;;;;;;;;;4CA2BkB;AAAA;;AAChB;AACA;AACAA,kCAAsBC,MAAtB,GAA+B,KAAKC,KAApC;AACAF,kCAAsBE,KAAtB,GAA8B,KAAKA,KAAnC;AACA,iBAAKC,WAAL,GAAmB,KAAKA,WAAL,CAAiBC,IAAjB,CAAsB,IAAtB,CAAnB;AACA,iBAAKC,iBAAL,GAAyB,KAAKA,iBAAL,CAAuBD,IAAvB,CAA4B,IAA5B,CAAzB;AACAJ,kCAAsBM,SAAtB,GAAkC,EAAlC;AACA,iBAAKC,MAAL,CAAYC,OAAZ,CAAoB,UAACC,KAAD,EAAW;AAC3B,oBAAMC,MAAM,IAAIX,WAAWY,OAAf,CAAuBF,KAAvB,CAAZ;AACAC,oBAAIE,gBAAJ;AACAZ,sCAAsBM,SAAtB,CAAgCO,IAAhC,CAAqCH,GAArC;AACAV,sCAAsBc,IAAtB,CAA2BL,KAA3B,IAAoCC,IAAII,IAAxC;AACAd,sCAAsBe,YAAtB,CAAmCN,KAAnC,IAA4CC,IAAIM,QAAhD;AACAhB,sCAAsBiB,YAAtB,CAAmCR,KAAnC,IAA4C,EAA5C;AACAT,sCAAsBkB,gBAAtB,CAAuCT,KAAvC,IAAgD,EAAhD;AACA,oBAAIA,SAAS,MAAb,EAAqB;AACjB,2BAAKF,MAAL,CAAYM,IAAZ,CAAiB,WAAjB;AACA,wBAAIM,UAAU,IAAIpB,WAAWY,OAAf,CAA0BF,KAA1B,WAAd;AACA,wBAAIW,OAAOzB,QAAQ,aAAR,CAAX;AACAwB,4BAAQE,KAAR,CAAcD,KAAQX,KAAR,WAAd;AACAT,0CAAsBM,SAAtB,CAAgCO,IAAhC,CAAqCM,OAArC;AACAnB,0CAAsBc,IAAtB,CAA8BL,KAA9B,cAA8CC,IAAII,IAAlD;AACAd,0CAAsBe,YAAtB,CAAsCN,KAAtC,cAAsDC,IAAIM,QAA1D;AACAhB,0CAAsBiB,YAAtB,CAAsCR,KAAtC,cAAsD,EAAtD;AACAT,0CAAsBkB,gBAAtB,CAA0CT,KAA1C,cAA0D,EAA1D;AACH;AACJ,aAnBD;AAoBAT,kCAAsBsB,cAAtB,GAAuC,EAAvC;AACAtB,kCAAsBuB,gBAAtB,GAAyC,EAAzC;AACA,iBAAKC,mBAAL,GAA2B,CAA3B;AACAxB,kCAAsByB,oBAAtB,GAA6C,CAA7C;AACA,iBAAKC,iBAAL,GAAyB,CAAzB;AACA,iBAAKC,mBAAL,GAA2B,EAA3B;AACA,iBAAKC,YAAL,CAAkBC,GAAlB,CAAsB,UAACC,CAAD,EAAO;AACzB,uBAAKH,mBAAL,CAAyBd,IAAzB,CAA8BkB,SAASD,CAAT,CAA9B;AACH,aAFD;AAGA,gBAAIE,UAAU,EAAd;AACA,gBAAIC,OAAOC,MAAP,CAAcC,UAAd,GAA2B,IAA/B,EAAqC;AACjCH,0BAAU,EAAV;AACH;AACD,gBAAIC,OAAOC,MAAP,CAAchC,KAAd,GAAsB,GAA1B,EAA+B;AAC3B8B,0BAAU,CAAV;AACH;AACD;AACAhC,kCAAsBoC,WAAtB,GAAoC;AAChCC,wBAAQ3C,GAAG4C,MAAH,GAAYC,IAAZ,CAAiB7C,GAAG8C,YAApB,EAAkCC,IAAlC,CAAuCT,OAAvC,CADwB;AAEhCU,0BAAUhD,GAAG4C,MAAH,GAAYC,IAAZ,CAAiB7C,GAAGiD,cAApB,EAAoCF,IAApC,CAAyCT,OAAzC;AAFsB,aAApC;AAIAhC,kCAAsB4C,SAAtB,GAAkC,CAAlC;AACA5C,kCAAsB6C,WAAtB,GAAoC,CAApC;AACA7C,kCAAsB8C,eAAtB,GAAwC,CAAxC;AACA9C,kCAAsB+C,mBAAtB,GAA4C,EAA5C;AACA,iBAAK5C,WAAL;AACA,iBAAK6C,aAAL,GAAqB,EAArB;AACAhD,kCAAsBiD,aAAtB,GAAsC,EAAtC;AACAjD,kCAAsBkD,YAAtB,GAAqC,EAArC;AACH;;;uCACcC,Q,EAAUC,Q,EAAU;AAC/B,gBAAI,OAAOA,QAAP,IAAmB,WAAnB,IAAkCD,SAASE,MAAT,IAAmB,CAAzD,EACI;AACJ,iBAAK9C,MAAL,CAAYC,OAAZ,CAAoB,UAACC,KAAD,EAAW;AAC3B,oBAAMC,MAAM,IAAIX,WAAWY,OAAf,CAAuBF,KAAvB,CAAZ;AACAC,oBAAIE,gBAAJ;AACH,aAHD;AAIA,iBAAK0C,WAAL,CAAiB,KAAKC,YAAtB,EAAoC,KAAK/B,mBAAzC,EAA8D,KAAKI,YAAnE;AACA;AACH;;;uCACcuB,Q,EAAUC,Q,EAAU;AAC/B,gBAAI,OAAOA,QAAP,IAAmB,WAAvB,EACI;AACJ,iBAAKE,WAAL,CAAiB,KAAKC,YAAtB,EAAoC,KAAK/B,mBAAzC,EAA8D,KAAKI,YAAnE;AACAlC,eAAG8D,MAAH,CAAU,mBAAV,EAA+BC,IAA/B,CAAoC,KAAKF,YAAzC;AACH;;;uCACcJ,Q,EAAUC,Q,EAAU;AAC/B,gBAAI,OAAOA,QAAP,IAAmB,WAAvB,EACI;AACJ,iBAAKE,WAAL,CAAiB,KAAKC,YAAtB,EAAoC,KAAK/B,mBAAzC,EAA8D,KAAKI,YAAnE;AACAlC,eAAG8D,MAAH,CAAU,mBAAV,EAA+BC,IAA/B,CAAoC,KAAK7B,YAAzC;AACH;AACD;;;;;;sCAGc;AAAA;;AACV,gBAAI1B,QAAQF,sBAAsBE,KAAlC;AAAA,gBAAyCD,SAASD,sBAAsBC,MAAxE;AACA,gBAAI,OAAOC,KAAP,IAAgB,WAApB,EAAiC;AAC7BF,sCAAsBE,KAAtB,GAA8B,GAA9B;AACAA,wBAAQ,GAAR;AACH;AACD,gBAAI,OAAOD,MAAP,IAAiB,WAArB,EAAkC;AAC9BD,sCAAsBC,MAAtB,GAA+B,GAA/B;AACAA,yBAAS,GAAT;AACH;AACD;AACA,gBAAMyD,SAAShE,GAAGiE,WAAH,GACVC,MADU,CACH,CAAC,CAAC,GAAF,EAAO,GAAP,CADG,EAEVC,KAFU,CAEJ,CAAC,CAAD,EAAK3D,KAAL,CAFI,CAAf;AAGA,gBAAI4D,cAAcpE,GAAGqE,UAAH,CAAcL,MAAd,CAAlB;AACA,gBAAIM,WAAWtE,GAAGuE,OAAH,CAAWP,MAAX,CAAf;AACA,gBAAMQ,SAAS,SAATA,MAAS,CAACpC,CAAD;AAAA,uBAAOA,EAAE,KAAF,CAAP;AAAA,aAAf;AACA,iBAAKqC,IAAL,GAAY,UAACrC,CAAD;AAAA,uBAAO4B,OAAOQ,OAAOpC,CAAP,CAAP,CAAP;AAAA,aAAZ;AACA;AACA,iBAAKsC,OAAL,GAAe1E,GAAG8D,MAAH,CAAU,MAAV,EAAkBa,MAAlB,CAAyB,KAAzB,EACVC,IADU,CACL,OADK,EACI,cADJ,EAEVA,IAFU,CAEL,QAFK,EAEK,CAFL,EAGVC,KAHU,CAGJ,SAHI,EAGO,CAHP,CAAf;AAIA,iBAAKC,QAAL,GAAgB9E,GAAG8D,MAAH,CAAU,MAAV,EAAkBa,MAAlB,CAAyB,KAAzB,EACXC,IADW,CACN,OADM,EACG,cADH,EAEXA,IAFW,CAEN,QAFM,EAEI,CAFJ,EAGXC,KAHW,CAGL,SAHK,EAGM,CAHN,CAAhB;AAIA;AACA,gBAAME,SAAS/E,GAAGiE,WAAH,GACVC,MADU,CACH,CAAC,GAAD,EAAM,CAAC,GAAP,CADG,EAEVC,KAFU,CAEJ,CAAC,CAAD,EAAK5D,MAAL,CAFI,CAAf;AAGA,gBAAIyE,YAAYhF,GAAGiF,QAAH,CAAYF,MAAZ,CAAhB;AACA,gBAAIG,aAAalF,GAAGmF,SAAH,CAAaJ,MAAb,CAAjB;AACA,gBAAMK,SAAS,SAATA,MAAS,CAAChD,CAAD;AAAA,uBAAOA,EAAE,KAAF,CAAP;AAAA,aAAf;AACA,iBAAKiD,IAAL,GAAY,UAACjD,CAAD;AAAA,uBAAO2C,OAAOK,OAAOhD,CAAP,CAAP,CAAP;AAAA,aAAZ;AACA,qBAASkD,cAAT,GAA0B;AACtB,uBAAOtF,GAAGmF,SAAH,CAAaJ,MAAb,CAAP;AACH;AACD,qBAASQ,cAAT,GAA0B;AACtB,uBAAOvF,GAAGuE,OAAH,CAAWP,MAAX,CAAP;AACH;AACD;AACA,iBAAKwB,YAAL,GAAoBxF,GAAG8D,MAAH,CAAU,wBAAV,EAAoCa,MAApC,CAA2C,KAA3C,EACfC,IADe,CACV,IADU,EACJ,oBADI,EAEfC,KAFe,CAET,WAFS,EAEOrE,KAFP,SAGfqE,KAHe,CAGT,OAHS,EAGA,MAHA,EAIfF,MAJe,CAIR,KAJQ,EAKfc,OALe,CAKP,eALO,EAKU,IALV,EAMfb,IANe,CAMV,IANU,EAMJ,UANI,EAOfC,KAPe,CAOT,WAPS,EAOOrE,KAPP,SAQfqE,KARe,CAQT,OARS,EAQA,MARA,EASfA,KATe,CAST,SATS,EASE,qBATF,EAUfD,IAVe,CAUV,qBAVU,EAUa,eAVb,EAWfA,IAXe,CAWV,SAXU,WAWQpE,KAXR,SAWiBD,MAXjB,EAYfkF,OAZe,CAYP,wBAZO,EAYmB,IAZnB,EAafZ,KAbe,CAaT,UAbS,EAaG,SAbH,CAApB;AAcA,iBAAKW,YAAL,CAAkBb,MAAlB,CAAyB,UAAzB,EAAqCA,MAArC,CAA4C,YAA5C,EACKC,IADL,CACU,IADV,EACgB,OADhB,EAEKA,IAFL,CAEU,SAFV,EAEqB,YAFrB,EAGKA,IAHL,CAGU,MAHV,EAGkB,CAHlB,EAIKA,IAJL,CAIU,aAJV,EAIyB,CAJzB,EAKKA,IALL,CAKU,cALV,EAK0B,CAL1B,EAMKA,IANL,CAMU,QANV,EAMoB,MANpB,EAOKC,KAPL,CAOW,MAPX,EAOmB,SAPnB,EAQKF,MARL,CAQY,UARZ,EASKC,IATL,CASU,GATV,EASe,gBATf;AAUAtE,kCAAsBoF,eAAtB,GAAwC1F,GAAG8D,MAAH,CAAU,qBAAV,EACnCa,MADmC,CAC5B,QAD4B,EAEnCc,OAFmC,CAE3B,gBAF2B,EAET,IAFS,EAGnCb,IAHmC,CAG9B,IAH8B,EAGxB,aAHwB,EAInCA,IAJmC,CAI9B,OAJ8B,EAIrBpE,KAJqB,EAKnCqE,KALmC,CAK7B,WAL6B,EAKbrE,QAAQ,EALK,SAMnCoE,IANmC,CAM9B,QAN8B,EAMpBrE,MANoB,EAOnCkF,OAPmC,CAO3B,wBAP2B,EAOD,IAPC,EAQnCb,IARmC,CAQ9B,qBAR8B,EAQP,eARO,EASnCA,IATmC,CAS9B,SAT8B,WASZpE,KATY,SASHD,MATG,EAUnCsE,KAVmC,CAU7B,UAV6B,EAUjB,SAViB,CAAxC;AAWA;AACA,iBAAKW,YAAL,CAAkBb,MAAlB,CAAyB,GAAzB,EACKgB,IADL,CACUrB,QADV,EAEKM,IAFL,CAEU,IAFV,EAEgB,QAFhB;AAGA,iBAAKY,YAAL,CAAkBb,MAAlB,CAAyB,GAAzB,EACKC,IADL,CACU,WADV,oBACuCrE,MADvC,QAEKoF,IAFL,CAEUvB,WAFV,EAGKQ,IAHL,CAGU,IAHV,EAGgB,QAHhB;AAIA,iBAAKY,YAAL,CAAkBb,MAAlB,CAAyB,GAAzB,EACKgB,IADL,CACUX,SADV,EAEKJ,IAFL,CAEU,IAFV,EAEgB,QAFhB;AAGA,iBAAKY,YAAL,CAAkBb,MAAlB,CAAyB,GAAzB,EACKC,IADL,CACU,WADV,EACuB;AAAA,sCAAmBpE,KAAnB;AAAA,aADvB,EAEKmF,IAFL,CAEUT,UAFV,EAGKN,IAHL,CAGU,IAHV,EAGgB,QAHhB;AAIA,iBAAKY,YAAL,CAAkBb,MAAlB,CAAyB,GAAzB,EACKC,IADL,CACU,OADV,EACmB,WADnB,EAEKA,IAFL,CAEU,WAFV,oBAEuCrE,MAFvC,QAGKoF,IAHL,CAGUJ,iBACLK,QADK,CACIpF,KADJ,CAHV;AAKA,iBAAKgF,YAAL,CAAkBb,MAAlB,CAAyB,GAAzB,EACKC,IADL,CACU,OADV,EACmB,WADnB,EAEKe,IAFL,CAEUL,iBACLM,QADK,CACIrF,MADJ,CAFV;AAIA;AACA;AACA,iBAAKiF,YAAL,CAAkBb,MAAlB,CAAyB,MAAzB,EACKC,IADL,CACU,GADV,EACepE,QAAQ,CADvB,EAEKoE,IAFL,CAEU,GAFV,EAEerE,SAAS,EAFxB,EAGKsE,KAHL,CAGW,aAHX,EAG0B,QAH1B,EAIKA,KAJL,CAIW,MAJX,EAImB,MAJnB,EAKKd,IALL,CAKU,QALV;AAMA;AACA,iBAAKyB,YAAL,CAAkBb,MAAlB,CAAyB,MAAzB;AACI;AACA;AAFJ,aAGKC,IAHL,CAGU,GAHV,EAGe,KAHf,EAIKA,IAJL,CAIU,GAJV,EAIerE,SAAS,CAJxB,EAKKsE,KALL,CAKW,aALX,EAK0B,QAL1B,EAMKA,KANL,CAMW,MANX,EAMmB,MANnB;AAOI;AAPJ,aAQKd,IARL,CAQU,QARV;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA/D,eAAG6F,SAAH,CAAa,yBAAb,EAAwCC,MAAxC;AACA9F,eAAG8D,MAAH,CAAU,qBAAV,EAAiCa,MAAjC,CAAwC,KAAxC,EAA+CC,IAA/C,CAAoD,IAApD,EAA0D,UAA1D,EAAsEA,IAAtE,CAA2E,OAA3E,EAAoF,aAApF;AACA5E,eAAG8D,MAAH,CAAU,qBAAV,EAAiCa,MAAjC,CAAwC,KAAxC,EAA+CC,IAA/C,CAAoD,IAApD,EAA0D,eAA1D,EAA2EA,IAA3E,CAAgF,OAAhF,EAAyF,aAAzF;AACA,gBAAImB,cAAc/F,GAAG8D,MAAH,CAAU,gBAAV,EAA4Ba,MAA5B,CAAmC,KAAnC,EAA0CE,KAA1C,CAAgD,SAAhD,EAA2D,cAA3D,EACbA,KADa,CACP,OADO,EACE,KADF,EACSA,KADT,CACe,cADf,EAC+B,KAD/B,EAEbF,MAFa,CAEN,QAFM,EAEIC,IAFJ,CAES,IAFT,EAEe,eAFf,EAGbA,IAHa,CAGR,OAHQ,EAGC,eAHD,CAAlB;AAIAmB,wBAAYpB,MAAZ,CAAmB,QAAnB,EAA6BC,IAA7B,CAAkC,OAAlC,EAA2C,CAA3C,EAA8Cb,IAA9C,CAAmD,SAAnD;AACAgC,wBAAYpB,MAAZ,CAAmB,QAAnB,EAA6BC,IAA7B,CAAkC,OAAlC,EAA2C,CAA3C,EAA8Cb,IAA9C,CAAmD,SAAnD;AACAgC,wBAAYpB,MAAZ,CAAmB,QAAnB,EAA6BC,IAA7B,CAAkC,OAAlC,EAA2C,CAA3C,EAA8Cb,IAA9C,CAAmD,MAAnD;AACAgC,wBAAYC,EAAZ,CAAe,QAAf,EAAyB,YAAM;AAC3B,uBAAKhE,iBAAL,GAAyBK,SAASrC,GAAG8D,MAAH,CAAU,gBAAV,EAA4BmC,QAA5B,CAAqC,OAArC,CAAT,CAAzB;AACA,uBAAKC,oBAAL,CAA0B,OAAKlE,iBAA/B;AACA,uBAAKmE,cAAL;AACH,aAJD;AAKA,gBAAIC,iBAAiBpG,GAAG8D,MAAH,CAAU,gBAAV,EAA4Ba,MAA5B,CAAmC,KAAnC,EAA0CE,KAA1C,CAAgD,cAAhD,EAAgE,MAAhE,EAChBA,KADgB,CACV,SADU,EACC,cADD,EACiBA,KADjB,CACuB,OADvB,EACgC,KADhC,EAEhBF,MAFgB,CAET,QAFS,EAECC,IAFD,CAEM,IAFN,EAEY,gBAFZ,EAGhBA,IAHgB,CAGX,OAHW,EAGF,eAHE,CAArB;AAIAwB,2BAAezB,MAAf,CAAsB,QAAtB,EAAgCC,IAAhC,CAAqC,OAArC,EAA8C,CAA9C,EAAiDb,IAAjD,CAAsD,cAAtD;AACAqC,2BAAezB,MAAf,CAAsB,QAAtB,EAAgCC,IAAhC,CAAqC,OAArC,EAA8C,CAA9C,EAAiDb,IAAjD,CAAsD,uBAAtD;AACAqC,2BAAezB,MAAf,CAAsB,QAAtB,EAAgCC,IAAhC,CAAqC,OAArC,EAA8C,CAA9C,EAAiDb,IAAjD,CAAsD,aAAtD;AACAqC,2BAAezB,MAAf,CAAsB,QAAtB,EAAgCC,IAAhC,CAAqC,OAArC,EAA8C,CAA9C,EAAiDb,IAAjD,CAAsD,SAAtD;AACAqC,2BAAezB,MAAf,CAAsB,QAAtB,EAAgCC,IAAhC,CAAqC,OAArC,EAA8C,CAA9C,EAAiDb,IAAjD,CAAsD,eAAtD;AACAqC,2BAAezB,MAAf,CAAsB,QAAtB,EAAgCC,IAAhC,CAAqC,OAArC,EAA8C,CAA9C,EAAiDb,IAAjD,CAAsD,aAAtD;AACAqC,2BAAeJ,EAAf,CAAkB,QAAlB,EAA4B,YAAM;AAC9B,uBAAKlE,mBAAL,GAA2BO,SAASrC,GAAG8D,MAAH,CAAU,iBAAV,EAA6BmC,QAA7B,CAAsC,OAAtC,CAAT,CAA3B;AACA,uBAAKrC,WAAL,CAAiB,OAAKC,YAAtB,EAAoC,OAAK/B,mBAAzC,EAA8D,OAAKG,mBAAnE;AACA3B,sCAAsB+F,YAAtB,CAAmC,OAAKvE,mBAAxC,EAA6DxB,sBAAsByB,oBAAnF;AACH,aAJD;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAIuE,WAAWtG,GAAG8D,MAAH,CAAU,gBAAV,EAA4Ba,MAA5B,CAAmC,MAAnC,EACVC,IADU,CACL,IADK,EACC,oBADD,EAEVC,KAFU,CAEJ,UAFI,EAEQ,UAFR,EAGVA,KAHU,CAGJ,QAHI,EAGM,KAHN,CAAf;AAIAyB,qBAAS3B,MAAT,CAAgB,OAAhB,EACKc,OADL,CACa,kBADb,EACiC,IADjC,EAEKb,IAFL,CAEU,MAFV,EAEkB,OAFlB,EAGKA,IAHL,CAGU,MAHV,EAGkB,eAHlB,EAIKA,IAJL,CAIU,OAJV,EAImB,CAJnB,EAKKA,IALL,CAKU,SALV,EAKqB,IALrB,EAMKa,OANL,CAMa,oBANb,EAMmC,IANnC;AAOAa,qBAAS3B,MAAT,CAAgB,OAAhB,EAAyBc,OAAzB,CAAiC,oBAAjC,EAAuD,IAAvD,EAA6D1B,IAA7D,CAAkE,SAAlE,EACKa,IADL,CACU,OADV,EACmB,aADnB,EAEKA,IAFL,CAEU,WAFV,EAEuB,oCAFvB,EAGKC,KAHL,CAGW,eAHX,EAG4B,GAH5B;AAIAyB,qBAAS3B,MAAT,CAAgB,IAAhB;AACA2B,qBAAS3B,MAAT,CAAgB,OAAhB,EACKc,OADL,CACa,kBADb,EACiC,IADjC,EAEKb,IAFL,CAEU,MAFV,EAEkB,OAFlB,EAGKA,IAHL,CAGU,MAHV,EAGkB,eAHlB,EAIKA,IAJL,CAIU,OAJV,EAImB,CAJnB,EAKKa,OALL,CAKa,oBALb,EAKmC,IALnC;AAMAa,qBAAS3B,MAAT,CAAgB,OAAhB,EAAyBc,OAAzB,CAAiC,oBAAjC,EAAuD,IAAvD,EAA6D1B,IAA7D,CAAkE,UAAlE,EACKa,IADL,CACU,OADV,EACmB,aADnB,EAEKA,IAFL,CAEU,WAFV,EAEuB,iCAFvB,EAGKC,KAHL,CAGW,eAHX,EAG4B,GAH5B;AAIAyB,qBAASN,EAAT,CAAY,QAAZ,EAAsB,YAAM;AACxB1F,sCAAsByB,oBAAtB,GAA6CM,SAASrC,GAAG8D,MAAH,CAAU,qCAAV,EAAiDmC,QAAjD,CAA0D,OAA1D,CAAT,CAA7C;AACA3F,sCAAsB+F,YAAtB,CAAmC,OAAKvE,mBAAxC,EAA6DxB,sBAAsByB,oBAAnF;AACH,aAHD;AAIA,gBAAIwE,eAAe,EAAnB;AACA,gBAAI,KAAK1C,YAAL,CAAkBF,MAAlB,GAA2B,CAA/B,EAAkC;AAAA;AAAA;AAAA;;AAAA;AAC9B,yCAAoB,KAAKE,YAAzB,8HAAuC;AAAA,4BAA5B2C,KAA4B;;AACnCD,wCAAgBC,MAAMC,QAAN,KAAmB,IAAnC;AACA,4BAAI,KAAK5C,YAAL,CAAkB6C,OAAlB,CAA0BF,KAA1B,KAAoC,KAAK3C,YAAL,CAAkBF,MAAlB,GAA2B,CAAnE,EACI4C,aAAaI,KAAb,CAAmB,CAAnB,EAAsB,CAAC,CAAvB;AACJ,4BAAI,KAAK9C,YAAL,CAAkB6C,OAAlB,CAA0BF,KAA1B,KAAoC,CAAxC,EAA2C;AACvCD,4CAAgB,KAAhB;AACA;AACH;AACJ;AAT6B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUjC,aAVD,MAYIA,eAAe,KAAK1C,YAAL,CAAkB4C,QAAlB,EAAf;AACJ,gBAAIG,eAAe,EAAnB;AACA,gBAAI,KAAK1E,YAAL,CAAkByB,MAAlB,GAA2B,CAA/B,EAAkC;AAAA;AAAA;AAAA;;AAAA;AAC9B,0CAAoB,KAAKzB,YAAzB,mIAAuC;AAAA,4BAA5B2E,KAA4B;;AACnCD,wCAAgBC,MAAMJ,QAAN,KAAmB,IAAnC;AACA,4BAAI,KAAKvE,YAAL,CAAkBwE,OAAlB,CAA0BG,KAA1B,KAAoC,KAAK3E,YAAL,CAAkByB,MAAlB,GAA2B,CAAnE,EACIiD,aAAaD,KAAb,CAAmB,CAAnB,EAAsB,CAAC,CAAvB;AACJ,4BAAI,KAAKzE,YAAL,CAAkBwE,OAAlB,CAA0BG,KAA1B,KAAoC,CAAxC,EAA2C;AACvCD,4CAAgB,KAAhB;AACA;AACH;AACJ;AAT6B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUjC,aAVD,MAYIA,eAAe,KAAK1E,YAAL,CAAkBuE,QAAlB,EAAf;AACJ,gBAAIK,YAAY9G,GAAG8D,MAAH,CAAU,gBAAV,EAA4Ba,MAA5B,CAAmC,KAAnC,EAA0CE,KAA1C,CAAgD,SAAhD,EAA2D,cAA3D,EACXA,KADW,CACL,UADK,EACO,UADP,EAEXA,KAFW,CAEL,OAFK,EAEI,KAFJ,EAEWA,KAFX,CAEiB,QAFjB,EAE2B,kBAF3B,CAAhB;AAGA,gBAAIkC,aAAaD,UAAUnC,MAAV,CAAiB,KAAjB,CAAjB;AACAoC,uBAAWnC,IAAX,CAAgB,IAAhB,EAAsB,kBAAtB,EACKD,MADL,CACY,GADZ,EACiBZ,IADjB,CACsB,UADtB,EACkCc,KADlC,CACwC,cADxC,EACwD,KADxD;AAEAkC,uBAAWpC,MAAX,CAAkB,MAAlB,EAA0BZ,IAA1B,CAA+BwC,YAA/B,EACK3B,IADL,CACU,OADV,EACmB,WADnB,EAEKA,IAFL,CAEU,WAFV,EAEuB,KAAKf,YAF5B;AAGA,gBAAImD,aAAaF,UAAUnC,MAAV,CAAiB,KAAjB,CAAjB;AACAqC,uBAAWrC,MAAX,CAAkB,GAAlB,EAAuBZ,IAAvB,CAA4B,UAA5B;AACAiD,uBAAWrC,MAAX,CAAkB,MAAlB,EAA0BZ,IAA1B,CAA+B6C,YAA/B,EAA6C/B,KAA7C,CAAmD,YAAnD,EAAiE,QAAjE,EACKD,IADL,CACU,OADV,EACmB,WADnB,EACgCA,IADhC,CACqC,WADrC,EACkD,KAAK1C,YADvD;AAEA,iBAAK0B,WAAL,CAAiB,KAAKC,YAAtB,EAAoC,KAAK/B,mBAAzC,EAA8D,KAAKG,mBAAnE;AACA3B,kCAAsB+F,YAAtB,CAAmC,KAAKvE,mBAAxC,EAA6DxB,sBAAsByB,oBAAnF;AACA,iBAAKkF,iBAAL;AACAjH,eAAG8D,MAAH,CAAU,cAAV,EACKe,KADL,CACW,WADX,EAC2BrE,KAD3B,SAEKqE,KAFL,CAEW,OAFX,EAEoB,QAFpB,EAGKA,KAHL,CAGW,SAHX,EAGsB,qBAHtB;AAIH;AACD;;;;;;;;;oCAMYhB,Y,EAAc/B,mB,EAAqBI,Y,EAAc;AAAA;;AACzD,iBAAKsD,YAAL,CAAkBK,SAAlB,CAA4B,YAA5B,EAA0CC,MAA1C;AACA,iBAAKjF,MAAL,CAAYC,OAAZ,CAAoB,UAACC,KAAD,EAAW;AAC3BT,sCAAsB4G,OAAtB,CAA8BnG,KAA9B,IAAuC,CAAvC;AACAT,sCAAsB6G,OAAtB,CAA8BpG,KAA9B,IAAuC,CAAvC;AACAT,sCAAsB8G,OAAtB,CAA8BrG,KAA9B,IAAuC,CAAvC;AACAT,sCAAsB+G,iBAAtB,CAAwCtG,KAAxC,IAAiD,CAAjD;AACAT,sCAAsBgH,oBAAtB,CAA2CvG,KAA3C,IAAoD,CAApD;AACAT,sCAAsBiH,SAAtB,CAAgCxG,KAAhC,IAAyC,CAAzC;AACAT,sCAAsBkB,gBAAtB,CAAuCT,KAAvC,IAAgD,EAAhD;AACAT,sCAAsBiB,YAAtB,CAAmCR,KAAnC,EAA0C4C,MAA1C,GAAmD,CAAnD;AACH,aATD;AAUA;AAZyD,gBAajDhD,iBAbiD,GAagC,IAbhC,CAajDA,iBAbiD;AAAA,gBAa9B+D,OAb8B,GAagC,IAbhC,CAa9BA,OAb8B;AAAA,gBAarB1C,iBAbqB,GAagC,IAbhC,CAarBA,iBAbqB;AAAA,gBAaFxB,KAbE,GAagC,IAbhC,CAaFA,KAbE;AAAA,gBAaKgF,YAbL,GAagC,IAbhC,CAaKA,YAbL;AAAA,gBAamBV,QAbnB,GAagC,IAbhC,CAamBA,QAbnB;AAAA,gBAcnD0C,iBAdmD,GAcT,IAdS,CAcnDA,iBAdmD;AAAA,gBAchCC,kBAdgC,GAcT,IAdS,CAchCA,kBAdgC;AAezD;;AACA,gBAAMzD,SAAShE,GAAGiE,WAAH,GACVC,MADU,CACH,CAAC,CAAC,GAAF,EAAO,GAAP,CADG,EAEVC,KAFU,CAEJ,CAAC,CAAD,EAAK3D,KAAL,CAFI,CAAf;AAGA;AACA,gBAAMuE,SAAS/E,GAAGiE,WAAH,GACVC,MADU,CACH,CAAC,GAAD,EAAM,CAAC,GAAP,CADG,EAEVC,KAFU,CAEJ,CAAC,CAAD,EAAK3D,KAAL,CAFI,CAAf;AAGA;;;;;AAKA,qBAASkH,cAAT,CAAwBC,OAAxB,EAAiC;AAC7B,wBAAQ7F,mBAAR;AACI,yBAAK,CAAL;AACI,+BAAO6F,OAAP;AACJ,yBAAK,CAAL;AACI,4BAAIA,QAAQC,EAAR,IAAc,KAAd,IAAuBD,QAAQC,EAAR,IAAc,KAAzC,EAAgD;AAC5C,mCAAOD,OAAP;AACH;AACD;AACJ,yBAAK,CAAL;AACI,4BAAIA,QAAQE,MAAZ,EACI,OAAOF,OAAP;AACJ;AACJ,yBAAK,CAAL;AACI,4BAAIA,QAAQC,EAAR,IAAc,KAAlB,EAAyB;AACrB,mCAAOD,OAAP;AACH;AACD;AACJ,yBAAK,CAAL;AACI,4BAAIA,QAAQG,UAAR,IAAsB,IAAtB,IAA8BH,QAAQC,EAAR,IAAc,KAAhD,EAAuD;AACnD,mCAAOD,OAAP;AACH;AACD;AACJ,yBAAK,CAAL;AACI,4BAAIA,QAAQG,UAAR,IAAsB,GAAtB,IAA6BH,QAAQC,EAAR,IAAc,KAA/C,EAAsD;AAClD,mCAAOD,OAAP;AACH;AACD;AACJ;AACI,+BAAOA,OAAP;AA5BR;AA8BH;AACD;AACA;AACA3H,eAAG6F,SAAH,CAAa,WAAb,EAA0BC,MAA1B;AACA9F,eAAG6F,SAAH,CAAa,OAAb,EAAsBC,MAAtB;AACA,qBAASiC,YAAT,CAAsB/G,GAAtB,EAA2B;AACvB,oBAAIgH,WAAW,EAAf;AACAhH,oBAAIiH,SAAJ,CAAcnH,OAAd,CAAsB,UAACoH,QAAD,EAAc;AAChCA,6BAASC,MAAT,CAAgBrH,OAAhB,CAAwB,UAAC0F,KAAD,EAAW;AAC/B,4BAAI3C,aAAa6C,OAAb,CAAqBF,MAAM4B,OAA3B,KAAuC,CAAC,CAA5C,EAA+C;AAC3C5B,kCAAM6B,MAAN,CAAavH,OAAb,CAAqB,UAAC+F,KAAD,EAAW;AAC5B,oCAAI3E,aAAawE,OAAb,CAAqBG,MAAMyB,OAA3B,KAAuC,CAAC,CAA5C,EAA+C;AAC3CzB,0CAAMmB,QAAN,CAAelH,OAAf,CAAuB,UAAC6G,OAAD,EAAa;AAChCA,gDAAQW,OAAR,GAAkBzB,MAAMyB,OAAxB;AACAX,gDAAQS,OAAR,GAAkB5B,MAAM4B,OAAxB;AACA,4CAAIV,eAAeC,OAAf,KAA2BA,QAAQY,IAAR,IAAgB,IAA/C,EAAqD;AACjDjI,kEAAsBkB,gBAAtB,CAAuCmG,QAAQ5G,KAA/C,EAAsDI,IAAtD,CAA2DwG,OAA3D;AACAK,qDAAS7G,IAAT,CAAcwG,OAAd;AACH;AACJ,qCAPD;AAQH;AACJ,6BAXD;AAYH;AACJ,qBAfD;AAgBH,iBAjBD;AAkBA,uBAAOK,QAAP;AACH;AACD,gBAAI5G,OAAOd,sBAAsBM,SAAtB,CAAgC,CAAhC,EAAmCQ,IAA9C;AACA,gBAAIC,eAAef,sBAAsBM,SAAtB,CAAgC,CAAhC,EAAmCU,QAAtD;AACA,gBAAIkH,sBAAsBT,aAAazH,sBAAsBM,SAAtB,CAAgC,CAAhC,CAAb,EAAiD6H,IAAjD,CAAsD,UAACC,QAAD,EAAWC,QAAX,EAAwB;AACpG,oBAAI,OAAOvH,KAAKsH,SAASE,GAAd,CAAP,IAA6B,WAAjC,EAA8C;AAC1C,2BAAO,CAAP;AACH,iBAFD,MAGK,IAAI,OAAOxH,KAAKuH,SAASC,GAAd,CAAP,IAA6B,WAAjC,EAA8C;AAC/C,2BAAO,CAAC,CAAR;AACH,iBAFI,MAGA,IAAI,OAAOvH,aAAaqH,SAASE,GAAtB,CAAP,IAAqC,WAAzC,EAAsD;AACvD,2BAAO,CAAC,CAAR;AACH,iBAFI,MAGA,IAAI,OAAOvH,aAAasH,SAASC,GAAtB,CAAP,IAAqC,WAAzC,EAAsD;AACvD,2BAAO,CAAP;AACH,iBAFI,MAGA,IAAIvH,aAAaqH,SAASE,GAAtB,EAA2BvH,YAA3B,CAAwCsC,MAAxC,GAAiDtC,aAAasH,SAASC,GAAtB,EAA2BvH,YAA3B,CAAwCsC,MAA7F,EAAqG;AACtG,2BAAO,CAAP;AACH,iBAFI,MAGA;AACD,2BAAO,CAAC,CAAR;AACH;AACJ,aAnByB,CAA1B;AAoBA,gBAAIkF,cAAc,KAAKhI,MAAL,CAAY,CAAZ,CAAlB;AACA,qBAASiI,mBAAT,CAA6Bd,QAA7B,EAAuC;AACnCxC,6BAAaK,SAAb,CAAuB,SAAvB,EACKkD,IADL,CACUf,QADV,EAEKgB,KAFL,GAGKrE,MAHL,CAGY,GAHZ,EAIKC,IAJL,CAIU,OAJV,EAImB,WAJnB,EAKKD,MALL,CAKY,MALZ,EAMKC,IANL,CAMU,IANV,EAMgB,UAAC+C,OAAD,EAAa;AACzB,wBAAMsB,KAAQtB,QAAQC,EAAhB,SAAsBD,QAAQS,OAA9B,SAAyCT,QAAQW,OAAjD,SAA4DX,QAAQuB,YAApE,SAAoFvB,QAAQ5G,KAAlG;AACA;AACAT,0CAAsB6I,YAAtB,CAAmCxB,OAAnC;AACAA,4BAAQyB,UAAR,GAAqBH,EAArB;AACA,wBAAIjH,sBAAsB,CAA1B,EAA6B;AACzB,4BAAI2F,QAAQY,IAAR,KAAiB,SAArB,EAAgC;AAC5BjI,kDAAsBiB,YAAtB,CAAmCoG,QAAQ5G,KAA3C,EAAkDI,IAAlD,CAAuDwG,OAAvD;AACH;AACD,4BAAIA,QAAQY,IAAR,KAAiB,SAArB,EAAgC;AAC5BjI,kDAAsB6G,OAAtB,CAA8BQ,QAAQ5G,KAAtC;AACH;AACD,4BAAI4G,QAAQY,IAAR,KAAiB,SAArB,EAAgC;AAC5BjI,kDAAsB4G,OAAtB,CAA8BS,QAAQ5G,KAAtC;AACH;AACD,+BAAOkI,EAAP;AACH;AACD,wBAAItB,QAAQY,IAAR,KAAiB,SAAjB,IAA8B,OAAOjI,sBAAsBc,IAAtB,CAA2BuG,QAAQ5G,KAAnC,EAA0C4G,QAAQiB,GAAlD,CAAP,KAAkE,WAApG,EAAiH;AAC7GtI,8CAAsBiB,YAAtB,CAAmCoG,QAAQ5G,KAA3C,EAAkDI,IAAlD,CAAuDwG,OAAvD;AACA,+BAAOsB,EAAP;AACH;AACD,2BAAOA,EAAP;AACH,iBA5BD,EA6BKrE,IA7BL,CA6BU,GA7BV,EA6Be,UAAC+C,OAAD,EAAa;AACxB,wBAAIA,QAAQC,EAAR,KAAe,KAAnB,EAA0B;AACtB,+BAAOtH,sBAAsBoC,WAAtB,CAAkCM,QAAlC,EAAP;AACH;AACD,2BAAO1C,sBAAsBoC,WAAtB,CAAkCC,MAAlC,EAAP;AACH,iBAlCD,EAmCKiC,IAnCL,CAmCU,WAnCV,EAmCuB,UAAC+C,OAAD;AAAA,0CAA0B3D,OAAO2D,QAAQ0B,GAAf,CAA1B,SAAiDtE,OAAO4C,QAAQ2B,GAAf,CAAjD;AAAA,iBAnCvB,EAoCKC,KApCL,CAoCW/D,YApCX;AAqCI;AArCJ,iBAsCKX,KAtCL,CAsCW,MAtCX,EAsCmB,UAAC8C,OAAD;AAAA,2BAAahH,kBAAkBgH,OAAlB,EAA2B3F,iBAA3B,CAAb;AAAA,iBAtCnB;AAuCI;AAvCJ,iBAwCK6C,KAxCL,CAwCW,SAxCX,EAwCsB,UAAC8C,OAAD,EAAa;AAC/B,2BAAOrH,sBAAsBkJ,cAAtB,CAAqC7I,kBAAkBgH,OAAlB,EAA2B3F,iBAA3B,CAArC,CAAP;AACH,iBA1CD,EA2CKgE,EA3CL,CA2CQ,WA3CR,EA2CqB,UAAUyD,IAAV,EAAgB;AACjC,wBAAIzJ,GAAG8D,MAAH,CAAU,IAAV,EAAgB2F,IAAhB,GAAuB5E,KAAvB,CAA6B6E,OAA7B,IAAwC,CAA5C,EACI;AACJjC,uCAAmBgC,IAAnB,EAAyB3H,mBAAzB,EAA8CE,iBAA9C,EAAiE0C,OAAjE,EAA0E,IAA1E;AACH,iBA/CD,EAgDKsB,EAhDL,CAgDQ,UAhDR,EAgDoB,UAAUyD,IAAV,EAAgB;AAChC,wBAAIzJ,GAAG8D,MAAH,CAAU,IAAV,EAAgB2F,IAAhB,GAAuB5E,KAAvB,CAA6B6E,OAA7B,IAAwC,CAA5C,EACI;AACJnH,2BAAOoH,YAAP,CAAoBrJ,sBAAsB4C,SAA1C;AACAsE,sCAAkBiC,IAAlB,EAAwB3H,mBAAxB,EAA6CE,iBAA7C,EAAgE0C,OAAhE,EAAyE,IAAzE;AACH,iBArDD;AAsDH;AACDoE,gCAAoBN,mBAApB;AACA,gBAAIoB,gBAAgB,EAApB;AACAtJ,kCAAsBM,SAAtB,CAAgCE,OAAhC,CAAwC,UAACE,GAAD,EAAM6I,KAAN,EAAgB;AACpD,oBAAIA,QAAQ,CAAZ,EACI;AACJD,gCAAgBA,cAAcE,MAAd,CAAqB/B,aAAa/G,GAAb,CAArB,CAAhB;AACH,aAJD;AAKA8H,gCAAoBc,aAApB;AACA,qBAASG,WAAT,CAAqBC,MAArB,EAA6BC,MAA7B,EAAqC;AACjC,oBAAIC,KAAKlG,OAAOgG,OAAOX,GAAd,IAAqBrF,OAAOiG,OAAOZ,GAAd,CAA9B;AACAa,qBAAKA,KAAKA,EAAV;AACA,oBAAIC,KAAKpF,OAAOiF,OAAOV,GAAd,IAAqBvE,OAAOkF,OAAOX,GAAd,CAA9B;AACAa,qBAAKA,KAAKA,EAAV;AACA,uBAAOC,KAAKC,IAAL,CAAUH,KAAKC,EAAf,CAAP;AACH;AACD,gBAAIG,kBAAkB,EAAtB;AACAhK,kCAAsBkB,gBAAtB,CAAuCqH,WAAvC,EAAoD/H,OAApD,CAA4D,UAAC6G,OAAD,EAAa;AACrE,uBAAK9G,MAAL,CAAYC,OAAZ,CAAoB,UAACC,KAAD,EAAQ8I,KAAR,EAAkB;AAClC,wBAAIA,QAAQ,CAAZ,EACI;AACJ,wBAAIU,kBAAkBvK,GAAG8D,MAAH,OAAc6D,QAAQyB,UAAR,CAAmBoB,OAAnB,CAA2B7C,QAAQ5G,KAAnC,EAA0CA,KAA1C,CAAd,CAAtB;AACA,wBAAI,CAACwJ,gBAAgBE,KAAhB,EAAL,EAA8B;AAC1B,4BAAI9B,WAAW3I,GAAG8D,MAAH,OAAc6D,QAAQyB,UAAtB,EAAoCL,IAApC,GAA2C,CAA3C,CAAf;AACA,4BAAIwB,gBAAgBxB,IAAhB,GAAuB,CAAvB,EAA0BR,IAA1B,IAAkCI,SAASJ,IAA/C;AACA;AACA;AACA;AACI+B,gDAAgBnJ,IAAhB,CAAqB,EAAEoJ,iBAAiB5B,QAAnB,EAA6B+B,cAAcH,gBAAgBxB,IAAhB,GAAuB,CAAvB,CAA3C,EAAsEE,mBAAiBN,SAASO,YAAhG,EAArB;AACH;AACJ;AACJ,iBAbD;AAcH,aAfD;AAgBA1D,yBAAaK,SAAb,CAAuB,oBAAvB,EACKkD,IADL,CACUuB,eADV,EAEKtB,KAFL,GAGKrE,MAHL,CAGY,GAHZ,EAIKc,OAJL,CAIa,WAJb,EAI0B,IAJ1B,EAKKd,MALL,CAKY,MALZ,EAMKC,IANL,CAMU,IANV,EAMgB,UAACxC,CAAD,EAAO;AACnB,uBAAOA,EAAE6G,EAAT;AACH,aARD,EASKrE,IATL,CASU,OATV,EASmB,eATnB,EAUKA,IAVL,CAUU,IAVV,EAUgB,UAACxC,CAAD,EAAO;AACnB,uBAAO4B,OAAO5B,EAAEmI,eAAF,CAAkBlB,GAAzB,CAAP;AACH,aAZD,EAaKzE,IAbL,CAaU,IAbV,EAagB,UAACxC,CAAD,EAAO;AACnB,uBAAO2C,OAAO3C,EAAEmI,eAAF,CAAkBjB,GAAzB,CAAP;AACH,aAfD,EAgBK1E,IAhBL,CAgBU,IAhBV,EAgBgB,UAACxC,CAAD,EAAO;AACnB,uBAAO2C,OAAO3C,EAAEsI,YAAF,CAAepB,GAAtB,CAAP;AACH,aAlBD,EAmBK1E,IAnBL,CAmBU,IAnBV,EAmBgB,UAACxC,CAAD,EAAO;AACnB,uBAAO4B,OAAO5B,EAAEsI,YAAF,CAAerB,GAAtB,CAAP;AACH,aArBD,EAsBKzE,IAtBL,CAsBU,cAtBV,EAsB0B,GAtB1B,EAuBKA,IAvBL,CAuBU,QAvBV,EAuBoB,SAvBpB,EAwBKA,IAxBL,CAwBU,YAxBV,EAwBwB,aAxBxB,EAyBKA,IAzBL,CAyBU,SAzBV,EAyBqB,KAzBrB,EA0BKoB,EA1BL,CA0BQ,WA1BR,EA0BqB,UAAUyD,IAAV,EAAgB;AACjChC,mCAAmBgC,KAAKc,eAAxB,EAAyCzI,mBAAzC,EAA8DE,iBAA9D,EAAiF0C,OAAjF,EAA0F,KAA1F;AACA+C,mCAAmBgC,KAAKiB,YAAxB,EAAsC5I,mBAAtC,EAA2DE,iBAA3D,EAA8E8C,QAA9E,EAAwF,KAAxF;AACAJ,wBAAQiG,UAAR,GACK9F,KADL,CACW,SADX,EACsB,GADtB,EAEKA,KAFL,CAEW,MAFX,EAEmBb,OAAOyF,KAAKc,eAAL,CAAqBlB,GAA5B,IAAmC,EAAnC,GAAwC,IAF3D,EAGKxE,KAHL,CAGW,KAHX,EAGkBE,OAAO0E,KAAKc,eAAL,CAAqBjB,GAA5B,IAAmC,EAAnC,GAAwC,IAH1D,EAIKzE,KAJL,CAIW,QAJX,EAIqBvE,sBAAsBiD,aAJ3C,EAKKsB,KALL,CAKW,OALX,EAKoB+F,OAAOtK,sBAAsBkD,YAA7B,IAA6C,IALjE;AAMAsB,yBAAS6F,UAAT,GACK9F,KADL,CACW,SADX,EACsB,GADtB,EAEKA,KAFL,CAEW,MAFX,EAEmBb,OAAOyF,KAAKiB,YAAL,CAAkBrB,GAAzB,IAAgC,EAAhC,GAAqC,IAFxD,EAGKxE,KAHL,CAGW,KAHX,EAGkBE,OAAO0E,KAAKiB,YAAL,CAAkBpB,GAAzB,IAAgC,EAAhC,GAAqC,IAHvD,EAIKzE,KAJL,CAIW,QAJX,EAIqBvE,sBAAsBiD,aAJ3C,EAKKsB,KALL,CAKW,OALX,EAKoB+F,OAAOtK,sBAAsBkD,YAA7B,IAA6C,IALjE;AAMAxD,mBAAG8D,MAAH,CAAU,IAAV,EAAgBc,IAAhB,CAAqB,cAArB,EAAqC,CAArC,EACKA,IADL,CACU,SADV,EACqB,KADrB;AAEH,aA3CD,EA4CKoB,EA5CL,CA4CQ,UA5CR,EA4CoB,UAAUyD,IAAV,EAAgB;AAChClH,uBAAOoH,YAAP,CAAoBrJ,sBAAsB4C,SAA1C;AACAsE,kCAAkBiC,KAAKc,eAAvB,EAAwCzI,mBAAxC,EAA6DE,iBAA7D,EAAgF0C,OAAhF,EAAyF,KAAzF;AACA8C,kCAAkBiC,KAAKiB,YAAvB,EAAqC5I,mBAArC,EAA0DE,iBAA1D,EAA6E0C,OAA7E,EAAsF,KAAtF;AACAA,wBAAQiG,UAAR,GACK9F,KADL,CACW,SADX,EACsB,CADtB;AAEAC,yBAAS6F,UAAT,GACK9F,KADL,CACW,SADX,EACsB,CADtB;AAEA7E,mBAAG8D,MAAH,CAAU,IAAV,EAAgBc,IAAhB,CAAqB,cAArB,EAAqC,GAArC,EACKA,IADL,CACU,SADV,EACqB,KADrB;AAEH,aAtDD;AAuDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAK/D,MAAL,CAAYC,OAAZ,CAAoB,UAACC,KAAD,EAAW;AAC3BT,sCAAsBiB,YAAtB,CAAmCR,KAAnC,EAA0C0H,IAA1C,CAA+C,UAACC,QAAD,EAAWC,QAAX;AAAA,2BAAwBD,SAASE,GAAT,GAAeD,SAASC,GAAhD;AAAA,iBAA/C;AACH,aAFD;AAGA,iBAAKzC,cAAL;AACH;AACD;;;;;;;;;AAqDA;;;4CAGoB;AAAA;;AAChB,gBAAM0E,cAAc,CAAC,mBAAD,EAAsB,0BAAtB,CAApB;AACA,gBAAMC,iBAAiB,CAAC,6BAAD,EAAgC,sBAAhC,CAAvB;AACA,gBAAIC,oBAAJ;AAAA,gBAAiBC,qBAAqB,CAAtC;AAHgB,gBAIRrK,iBAJQ,GAIiC,IAJjC,CAIRA,iBAJQ;AAAA,gBAIWqB,iBAJX,GAIiC,IAJjC,CAIWA,iBAJX;AAKhB;;;;;AAIA,qBAASiJ,iBAAT,CAA2BC,KAA3B,EAAkC;AAC9B,oBAAI,OAAOA,MAAMC,SAAb,IAA0B,WAA9B,EAA2C;AACvC,wBAAI7K,sBAAsB+C,mBAAtB,CAA0CqD,OAA1C,CAAkD0E,eAAeF,KAAf,CAAlD,KAA4E,CAAC,CAAjF,EAAoF;AAChFlL,2BAAG8D,MAAH,CAAU,eAAV,EACK2B,OADL,CACa,cADb,EAC6B,KAD7B,EAEKb,IAFL,CAEU,GAFV,EAEe,UAAC+C,OAAD;AAAA,mCAAarH,sBAAsB+K,gBAAtB,CAAuC1D,OAAvC,CAAb;AAAA,yBAFf,EAE6EgD,UAF7E,GAE0FW,QAF1F,CAEmG,EAFnG,EAGKzG,KAHL,CAGW,MAHX,EAGmB,UAAC8C,OAAD;AAAA,mCAAahH,kBAAkBgH,OAAlB,EAA2B3F,iBAA3B,CAAb;AAAA,yBAHnB,EAIK6C,KAJL,CAIW,SAJX,EAIsB,OAJtB;AAKA;AACA;AACA;AACH;AACJ;AACJ;AACD;;;;AAIA,qBAAS0G,OAAT,CAAiBL,KAAjB,EAAwB;AACpB,oBAAMM,MAAMJ,eAAeF,KAAf,CAAZ;AACA,oBAAI5K,sBAAsB+C,mBAAtB,CAA0CM,MAA1C,IAAoD,CAAxD,EAA2D;AACvDrD,0CAAsB+C,mBAAtB,CAA0CvC,OAA1C,CAAkD,UAAC2I,IAAD,EAAU;AACxDA,6BAAK7E,IAAL,CAAU,GAAV,EAAe,UAAC+C,OAAD;AAAA,mCAAarH,sBAAsB+K,gBAAtB,CAAuC1D,OAAvC,CAAb;AAAA,yBAAf,EAA6EgD,UAA7E,GAA0FW,QAA1F,CAAmG,EAAnG,EACKzG,KADL,CACW,MADX,EACmB,UAAC8C,OAAD;AAAA,mCAAahH,kBAAkBgH,OAAlB,EAA2B3F,iBAA3B,CAAb;AAAA,yBADnB,EAEK6C,KAFL,CAEW,SAFX,EAEsB,OAFtB;AAGA;AACA;AACA;AACH,qBAPD;AAQAvE,0CAAsB+C,mBAAtB,CAA0CoI,GAA1C;AACH;AACDnL,sCAAsB+C,mBAAtB,CAA0ClC,IAA1C,CAA+CqK,GAA/C;AACAJ,+BAAeF,KAAf,EAAsBtG,IAAtB,CAA2B,GAA3B,EAAgC,UAAC+C,OAAD;AAAA,2BAAarH,sBAAsB+K,gBAAtB,CAAuC1D,OAAvC,EAAgD,KAAhD,CAAb;AAAA,iBAAhC,EACKlC,OADL,CACa,cADb,EAC6B,KAD7B,EAEKZ,KAFL,CAEW,MAFX,EAEmB,SAFnB,EAGKA,KAHL,CAGW,SAHX,EAGsB,GAHtB;AAIH;AACD;;;;;AAKA,qBAASuG,cAAT,CAAwBF,KAAxB,EAA+B;AAC3B,oBAAI,OAAOA,MAAMC,SAAN,CAAgB/C,OAAvB,IAAkC,WAAtC,EACI,OAAO,IAAP;AACJ,uBAAOpI,GAAG8D,MAAH,CAAU,UACboH,MAAMC,SAAN,CAAgBO,WADH,GACiB,GADjB,GAEbR,MAAMC,SAAN,CAAgB/C,OAFH,GAEa,GAFb,GAGb8C,MAAMC,SAAN,CAAgBQ,QAHH,GAGc,GAHd,GAIbT,MAAMC,SAAN,CAAgBS,aAJb,CAAP;AAKH;AACD;;;;AAIA,qBAASC,eAAT,CAAyBX,KAAzB,EAAgC;AAC5B,oBAAIM,MAAMJ,eAAeF,KAAf,CAAV;AACA,oBAAIM,GAAJ,EAAS;AACLA,wBAAI5G,IAAJ,CAAS,GAAT,EAAc,UAACxC,CAAD;AAAA,+BAAO9B,sBAAsB+K,gBAAtB,CAAuCjJ,CAAvC,EAA0C,KAA1C,CAAP;AAAA,qBAAd,EACKqD,OADL,CACa,cADb,EAC6B,IAD7B,EAEKZ,KAFL,CAEW,MAFX,EAEmB,QAFnB,EAGKA,KAHL,CAGW,SAHX,EAGsB,GAHtB;AAIA;AACH;AACJ;AACDtC,mBAAOuJ,gBAAP,CAAwB,8BAAxB,EAAwD,UAACZ,KAAD,EAAW;AAC/D,oBAAMa,mBAAmB,GAAzB;AACA,oBAAIC,MAAM,IAAIC,IAAJ,GAAWC,OAAX,EAAV;AACA,yBAASC,SAAT,CAAmBjB,KAAnB,EAA0B;AACtB,wBAAI,OAAOA,MAAMC,SAAb,IAA0B,WAA9B,EAA2C;AACvC,4BAAIK,MAAMJ,eAAeF,KAAf,CAAV;AACA,4BAAIM,GAAJ,EAAS;AACL,gCAAIA,IAAI5G,IAAJ,CAAS,OAAT,EAAkBwH,QAAlB,CAA2B,SAA3B,CAAJ,EAA2C;AACvC;AACH;AACJ;AACDnB,0CAAkBC,KAAlB;AACAW,wCAAgBX,KAAhB;AACH,qBATD,MAUK;AACDD,0CAAkBC,KAAlB;AACH;AACJ;AACD,oBAAI,CAACH,WAAL,EAAkB;AACd,wBAAIiB,MAAMhB,kBAAN,GAA4B,IAAIe,gBAApC,EAAuD;AACnDI,kCAAUjB,KAAV,EADmD,CACjC;AAClBF,6CAAqBgB,GAArB;AACH;AACDjB,kCAAcsB,WAAW,YAAY;AACjCtB,sCAAc,IAAd;AACAC,6CAAqB,IAAIiB,IAAJ,GAAWC,OAAX,EAArB;AACAC,kCAAUjB,KAAV;AACH,qBAJa,EAIXa,gBAJW,CAAd;AAKH;AACJ,aA7BD;AA8BAxJ,mBAAOuJ,gBAAP,CAAwB,uBAAxB,EAAiD,UAACZ,KAAD,EAAW;AACxD,oBAAI,OAAOA,MAAMC,SAAb,IAA0B,WAA9B,EAA2C;AACvC,wBAAIK,MAAMJ,eAAeF,KAAf,CAAV;AACA,wBAAIM,GAAJ,EAAS;AACL,4BAAIA,IAAI5G,IAAJ,CAAS,OAAT,EAAkBwH,QAAlB,CAA2B,SAA3B,CAAJ,EAA2C;AACvC;AACH;AACJ;AACDnB,sCAAkBC,KAAlB;AACAW,oCAAgBX,KAAhB;AACH,iBATD,MAUK;AACDD,sCAAkBC,KAAlB;AACH;AACJ,aAdD;AAeA3I,mBAAOuJ,gBAAP,CAAwB,iBAAxB,EAA2C,UAAC1J,CAAD,EAAO;AAC9C9B,sCAAsBsB,cAAtB,CAAqCd,OAArC,CAA6C,UAAC6G,OAAD,EAAa;AACtD,wBAAIA,QAAQyB,UAAR,IAAsB,EAA1B,EAA8B;AAC1BpJ,2BAAG8D,MAAH,OAAc6D,QAAQyB,UAAtB,EACKvE,KADL,CACW,YADX,EACyB,SADzB;AAEH;AACJ,iBALD;AAMA,oBAAI,OAAKvB,aAAL,IAAsBlB,EAAEkK,MAA5B,EAAoC;AAChChM,0CAAsBsB,cAAtB,GAAuC,EAAvC;AACAtB,0CAAsBuB,gBAAtB,GAAyC,EAAzC;AACA,2BAAKyB,aAAL,GAAqB,EAArB;AACA;AACH;AACD,uBAAKA,aAAL,GAAqBlB,EAAEkK,MAAvB;AACA,uBAAKzL,MAAL,CAAYC,OAAZ,CAAoB,UAACC,KAAD,EAAW;AAC3BT,0CAAsBsB,cAAtB,GAAuCtB,sBAAsBkB,gBAAtB,CAAuCT,KAAvC,EAA8CwL,MAA9C,CAAqD,UAAC5E,OAAD,EAAa;AACrG,4BAAI,EAAEA,QAAQuB,YAAR,IAAwB,OAAK5F,aAAL,CAAmBkJ,KAA3C,IAAoD7E,QAAQuB,YAAR,IAAwB,OAAK5F,aAAL,CAAmBmJ,GAAjG,CAAJ,EACI,OAAO9E,OAAP,CADJ,KAGIrH,sBAAsBuB,gBAAtB,CAAuCV,IAAvC,CAA4CwG,OAA5C;AACP,qBALsC,CAAvC;AAMH,iBAPD;AAQArH,sCAAsBsB,cAAtB,CAAqCd,OAArC,CAA6C,UAAC6G,OAAD,EAAa;AACtD,wBAAIA,QAAQyB,UAAR,IAAsB,EAA1B,EAA8B;AAC1B,4BAAIpJ,GAAG8D,MAAH,OAAc6D,QAAQyB,UAAtB,EAAoCqB,KAApC,EAAJ,EAAiD;AAC7C;AACH;AACDzK,2BAAG8D,MAAH,OAAc6D,QAAQyB,UAAtB,EAAoCvE,KAApC,CAA0C,YAA1C,EAAwD,QAAxD;AACH;AACJ,iBAPD;AAQH,aA9BD;AA+BA;;;AAGAgG,wBAAY/J,OAAZ,CAAoB,UAAC+B,IAAD,EAAU;AAC1BN,uBAAOuJ,gBAAP,CAAwBjJ,IAAxB,EAA8B,UAACqI,KAAD,EAAW;AACrCK,4BAAQL,KAAR;AACH,iBAFD;AAGH,aAJD;AAKAJ,2BAAehK,OAAf,CAAuB,UAAC+B,IAAD,EAAU;AAC7BN,uBAAOuJ,gBAAP,CAAwBjJ,IAAxB,EAA8B,UAACqI,KAAD,EAAW;AACrC,wBAAI5K,sBAAsB+C,mBAAtB,CAA0CqD,OAA1C,CAAkDwE,KAAlD,IAA2D,CAAC,CAAhE,EAAmE;AAC/D;AACH;AACDD,sCAAkBC,KAAlB;AACH,iBALD;AAMH,aAPD;AAQH;AACD;;;;;;yCAGiB;AAAA;;AACblL,eAAG6F,SAAH,CAAa,iBAAb,EAAgCC,MAAhC;AACA9F,eAAG8D,MAAH,CAAU,WAAV,EAAuBa,MAAvB,CAA8B,OAA9B,EAAuCc,OAAvC,CAA+C,gBAA/C,EAAiE,IAAjE,EAAuEd,MAAvE,CAA8E,IAA9E,EACKc,OADL,CACa,yBADb,EACwC,IADxC,EAC8Cd,MAD9C,CACqD,IADrD,EAEKZ,IAFL,CAEU,KAFV;AAGA,oBAAQ,KAAK/B,iBAAb;AACI,qBAAK,CAAL;AACIhC,uBAAG8D,MAAH,CAAU,0BAAV,EAAsCa,MAAtC,CAA6C,IAA7C,EAAmDZ,IAAnD,CAAwD,mBAAxD,EACKa,IADL,CACU,OADV,EACmB,WADnB,EAEKA,IAFL,CAEU,WAFV,EAEuB,4DACnB,yBAHJ;AAIA5E,uBAAG8D,MAAH,CAAU,0BAAV,EAAsCa,MAAtC,CAA6C,IAA7C,EAAmDZ,IAAnD,CAAwD,iBAAxD,EACKa,IADL,CACU,OADV,EACmB,WADnB,EAEKA,IAFL,CAEU,WAFV,EAEuB,qEAFvB;AAGA5E,uBAAG8D,MAAH,CAAU,0BAAV,EAAsCa,MAAtC,CAA6C,IAA7C,EAAmDZ,IAAnD,CAAwD,UAAxD,EACKa,IADL,CACU,OADV,EACmB,WADnB,EAEKA,IAFL,CAEU,WAFV,EAEuB,wEAFvB;AAGA;AACJ,qBAAK,CAAL;AACI5E,uBAAG8D,MAAH,CAAU,0BAAV,EAAsCa,MAAtC,CAA6C,IAA7C,EAAmDZ,IAAnD,CAAwD,uBAAxD;AACA/D,uBAAG8D,MAAH,CAAU,0BAAV,EAAsCa,MAAtC,CAA6C,IAA7C,EAAmDZ,IAAnD,CAAwD,oBAAxD;AACA/D,uBAAG8D,MAAH,CAAU,0BAAV,EAAsCa,MAAtC,CAA6C,IAA7C,EAAmDZ,IAAnD,CAAwD,SAAxD;AACA;AACJ,qBAAK,CAAL;AACI/D,uBAAG8D,MAAH,CAAU,0BAAV,EAAsCa,MAAtC,CAA6C,IAA7C,EAAmDZ,IAAnD,CAAwD,MAAxD;AACA;AApBR;AAsBAzD,kCAAsBM,SAAtB,CAAgCE,OAAhC,CAAwC,UAACE,GAAD,EAAS;AAC7C,oBAAI0L,iBAAiBpM,sBAAsBkB,gBAAtB,CAAuCR,IAAI2L,KAA3C,EAAkDhJ,MAAvE;AACA,oBAAI+I,kBAAkB,CAAtB,EACIA,iBAAiB,CAAjB;AACJ,wBAAQ,OAAK1K,iBAAb;AACI,yBAAK,CAAL;AACIhC,2BAAG8D,MAAH,CAAU,iBAAV,EAA6Ba,MAA7B,CAAoC,IAApC,EACKc,OADL,gBAC0BzE,IAAI2L,KAD9B,EACuC,IADvC,EAC6ChI,MAD7C,CACoD,IADpD,EAC0DZ,IAD1D,CAC+D/C,IAAI2L,KADnE;AAEA3M,2BAAG8D,MAAH,iBAAwB9C,IAAI2L,KAA5B,EAAqChI,MAArC,CAA4C,IAA5C,EACKZ,IADL,CACa6G,OAAOtK,sBAAsB6G,OAAtB,CAA8BnG,IAAI2L,KAAlC,CAAP,CADb,oCAEO/B,OAAO,CAACtK,sBAAsB6G,OAAtB,CAA8BnG,IAAI2L,KAAlC,IACXD,cADW,GACM,GADP,EAETE,OAFS,CAED,CAFC,CAAP,CAFP;AAKA5M,2BAAG8D,MAAH,iBAAwB9C,IAAI2L,KAA5B,EAAqChI,MAArC,CAA4C,IAA5C,EACKZ,IADL,CACa6G,OAAOtK,sBAAsB4G,OAAtB,CAA8BlG,IAAI2L,KAAlC,CAAP,CADb,oCAEO/B,OAAO,CAACtK,sBAAsB4G,OAAtB,CAA8BlG,IAAI2L,KAAlC,IACXD,cADW,GACM,GADP,EAETE,OAFS,CAED,CAFC,CAAP,CAFP;AAKA5M,2BAAG8D,MAAH,iBAAwB9C,IAAI2L,KAA5B,EAAqChI,MAArC,CAA4C,IAA5C,EACKZ,IADL,CACa6G,OAAOtK,sBAAsBiB,YAAtB,CAAmCP,IAAI2L,KAAvC,EAA8ChJ,MAArD,CADb,oCAEOiH,OAAO,CAACtK,sBAAsBiB,YAAtB,CAAmCP,IAAI2L,KAAvC,EAA8ChJ,MAA9C,GACX+I,cADW,GACM,GADP,EACYE,OADZ,CACoB,CADpB,CAAP,CAFP;AAIA;AACJ,yBAAK,CAAL;AACI5M,2BAAG8D,MAAH,CAAU,iBAAV,EAA6Ba,MAA7B,CAAoC,IAApC,EAA0Cc,OAA1C,gBAA+DzE,IAAI2L,KAAnE,EAA4E,IAA5E,EACKhI,MADL,CACY,IADZ,EACkBZ,IADlB,CACuB/C,IAAI2L,KAD3B;AAEA3M,2BAAG8D,MAAH,iBAAwB9C,IAAI2L,KAA5B,EAAqChI,MAArC,CAA4C,IAA5C,EACKZ,IADL,CACa6G,OAAOtK,sBAAsBgH,oBAAtB,CAA2CtG,IAAI2L,KAA/C,CAAP,CADb,oCAEO/B,OAAO,CAACtK,sBAAsBgH,oBAAtB,CAA2CtG,IAAI2L,KAA/C,IAAwDD,cAAxD,GAAyE,GAA1E,EACTE,OADS,CACD,CADC,CAAP,CAFP;AAIA5M,2BAAG8D,MAAH,iBAAwB9C,IAAI2L,KAA5B,EAAqChI,MAArC,CAA4C,IAA5C,EACKZ,IADL,CACa6G,OAAOtK,sBAAsB+G,iBAAtB,CAAwCrG,IAAI2L,KAA5C,CAAP,CADb,oCAEO/B,OAAO,CAACtK,sBAAsB+G,iBAAtB,CAAwCrG,IAAI2L,KAA5C,IACTD,cADS,GACQ,GADT,EAETE,OAFS,CAED,CAFC,CAAP,CAFP;AAKA5M,2BAAG8D,MAAH,iBAAwB9C,IAAI2L,KAA5B,EAAqChI,MAArC,CAA4C,IAA5C,EACKZ,IADL,CACa6G,OAAOtK,sBAAsB8G,OAAtB,CAA8BpG,IAAI2L,KAAlC,CAAP,CADb,oCAEO/B,OAAO,CAACtK,sBAAsB8G,OAAtB,CAA8BpG,IAAI2L,KAAlC,IAA2CD,cAA3C,GAA4D,GAA7D,EACTE,OADS,CACD,CADC,CAAP,CAFP;AAIA;AACJ,yBAAK,CAAL;AACI5M,2BAAG8D,MAAH,CAAU,iBAAV,EAA6Ba,MAA7B,CAAoC,IAApC,EACKc,OADL,gBAC0BzE,IAAI2L,KAD9B,EACuC,IADvC,EAEKhI,MAFL,CAEY,IAFZ,EAEkBZ,IAFlB,CAEuB/C,IAAI2L,KAF3B;AAGA3M,2BAAG8D,MAAH,iBAAwB9C,IAAI2L,KAA5B,EAAqChI,MAArC,CAA4C,IAA5C,EACKZ,IADL,CACa6G,OAAQtK,sBAAsBiH,SAAtB,CAAgCvG,IAAI2L,KAApC,CAAR,CADb,oCAEO/B,OAAO,CAACtK,sBAAsBiH,SAAtB,CAAgCvG,IAAI2L,KAApC,IACTD,cADS,GACQ,GADT,EACcE,OADd,CACsB,CADtB,CAAP,CAFP;AAxCR;AA6CH,aAjDD;AAkDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH;AACD;;;;;;;;AAqBA;;;;;;0CAMkBjF,O,EAASkF,W,EAAa;AACpC;AACA;AACA,oBAAQA,WAAR;AACI,qBAAK,CAAL;AACI,wBAAIlF,QAAQY,IAAR,KAAiB,SAArB,EAAgC;AAC5BZ,gCAAQmF,YAAR,GAAuB,MAAvB;AACA,+BAAOnF,QAAQmF,YAAf;AACH;AACDnF,4BAAQmF,YAAR,GAAuB,MAAvB;AACA,2BAAOnF,QAAQmF,YAAf;AACJ,qBAAK,CAAL;AACI,wBAAI,OAAOxM,sBAAsBe,YAAtB,CAAmCsG,QAAQ5G,KAA3C,EAAkD4G,QAAQiB,GAA1D,CAAP,KAA0E,WAA9E,EAA2F;AACvFjB,gCAAQmF,YAAR,GAAuB,SAAvB;AACA,+BAAOnF,QAAQmF,YAAf;AACH,qBAHD,MAIK;AACD,gCAAQxM,sBAAsBe,YAAtB,CAAmCsG,QAAQ5G,KAA3C,EAAkD4G,QAAQiB,GAA1D,EAA+DvH,YAA/D,CAA4EsC,MAApF;AACI,iCAAK,CAAL;AACIgE,wCAAQmF,YAAR,GAAuB,SAAvB;AACA,uCAAOnF,QAAQmF,YAAf;AACJ,iCAAK,CAAL;AACInF,wCAAQmF,YAAR,GAAuB,MAAvB;AACA,uCAAOnF,QAAQmF,YAAf;AACJ,iCAAK,CAAL;AACInF,wCAAQmF,YAAR,GAAuB,MAAvB;AACA,uCAAOnF,QAAQmF,YAAf;AACJ;AACInF,wCAAQmF,YAAR,GAAuB,SAAvB;AACA,uCAAOnF,QAAQmF,YAAf;AAZR;AAcH;AACL,qBAAK,CAAL;AACI,wBAAI,OAAOxM,sBAAsBc,IAAtB,CAA2BuG,QAAQ5G,KAAnC,EAA0C4G,QAAQiB,GAAlD,CAAP,KAAkE,WAAtE,EAAmF;AAC/EjB,gCAAQmF,YAAR,GAAuB,MAAvB;AACA,+BAAOnF,QAAQmF,YAAf;AACH,qBAHD,MAIK;AACDnF,gCAAQmF,YAAR,GAAuB,MAAvB;AACA,+BAAOnF,QAAQmF,YAAf;AACH;AACL;AACI;AAvCR;AAyCH;AACD;;;;;;;;;AA6IA;;;;;;;;2CAQmBnF,O,EAAS7F,mB,EAAqBE,iB,EAAmB0C,O,EAASqI,U,EAAY;AACrF,gBAAIC,iBAAiBrF,QAAQmF,YAA7B;AACA,gBAAInF,QAAQmF,YAAR,IAAwB,MAA5B,EACIE,iBAAiB,QAAjB;AACJ1M,kCAAsB2M,mBAAtB,CAA0C,0BAA1C,EAAsEtF,OAAtE,EAA+EA,QAAQ5G,KAAvF;AACA,gBAAIgM,UAAJ,EACIzM,sBAAsB4M,cAAtB,CAAqCvF,OAArC,EAA8C,KAA9C,EAAqD7F,mBAArD;AACJ,oBAAQE,iBAAR;AACI,qBAAK,CAAL;AACI,wBAAI2F,QAAQY,IAAR,KAAiB,SAArB,EAAgC;AAC5B7D,gCAAQyI,IAAR,CAAa7M,sBAAsB8M,WAAtB,CAAkCzF,OAAlC,IAA6C,eAA1D;AACH;AACD,wBAAIA,QAAQY,IAAR,KAAiB,SAArB,EAAgC;AAC5B7D,gCAAQyI,IAAR,CAAa7M,sBAAsB8M,WAAtB,CAAkCzF,OAAlC,IAA6C,eAA1D;AACH;AACD,wBAAIA,QAAQY,IAAR,KAAiB,SAArB,EAAgC;AAC5B7D,gCAAQyI,IAAR,CAAa7M,sBAAsB8M,WAAtB,CAAkCzF,OAAlC,IAA6C,qBAA1D;AACH;AACD;AACJ,qBAAK,CAAL;AACI,wBAAMtG,eAAef,sBAAsBe,YAAtB,CAAmCsG,QAAQ5G,KAA3C,CAArB;AACA,wBAAIsM,UAAU,EAAd;AACA,wBAAI,OAAOhM,aAAasG,QAAQiB,GAArB,CAAP,KAAqC,WAAzC,EAAsD;AAClDlE,gCAAQyI,IAAR,CAAa7M,sBAAsB8M,WAAtB,CAAkCzF,OAAlC,CAAb;AACA;AACH;AACD,wBAAI2F,oBAAoBjM,aAAasG,QAAQiB,GAArB,EAA0BvH,YAAlD;AACA,wBAAIiM,kBAAkBlB,QAAlB,CAA2B,SAA3B,CAAJ,EAA2C;AACvCiB,mCAAW,YAAX;AACH;AACD,wBAAIC,kBAAkBlB,QAAlB,CAA2B,uBAA3B,CAAJ,EAAyD;AACrDiB,mCAAW,2BAAX;AACA/M,8CAAsBkD,YAAtB,GAAqC,GAArC;AACH;AACD,wBAAI8J,kBAAkBlB,QAAlB,CAA2B,oBAA3B,CAAJ,EAAsD;AAClDiB,mCAAW,wBAAX;AACA/M,8CAAsBkD,YAAtB,GAAqC,GAArC;AACH;AACD,wBAAI8J,kBAAkBlB,QAAlB,CAA2B,aAA3B,CAAJ,EAA+C;AAC3CiB,mCAAW,kBAAX;AACH,qBAFD,MAGK;AACD3I,gCAAQyI,IAAR,CAAa7M,sBAAsB8M,WAAtB,CAAkCzF,OAAlC,CAAb;AACH;AACD,4BAAQrH,sBAAsBe,YAAtB,CAAmCsG,QAAQ5G,KAA3C,EAAkD4G,QAAQiB,GAA1D,EAA+DvH,YAA/D,CAA4EsC,MAApF;AACI,6BAAK,CAAL;AACIrD,kDAAsBiD,aAAtB,GAAsC,EAAtC;AACA;AACJ,6BAAK,CAAL;AACIjD,kDAAsBiD,aAAtB,GAAsC,EAAtC;AACA;AACJ;AACI;AARR;AAUAmB,4BAAQyI,IAAR,CAAa7M,sBAAsB8M,WAAtB,CAAkCzF,OAAlC,IAA6C0F,OAA1D;AACA;AACJ,qBAAK,CAAL;AACI,wBAAI,OAAO/M,sBAAsBc,IAAtB,CAA2BuG,QAAQ5G,KAAnC,EAA0C4G,QAAQiB,GAAlD,CAAP,KAAkE,WAAtE,EAAmF;AAC/ElE,gCAAQyI,IAAR,CAAa7M,sBAAsB8M,WAAtB,CAAkCzF,OAAlC,CAAb;AACH,qBAFD,MAGK;AACDjD,gCAAQyI,IAAR,CAAa7M,sBAAsB8M,WAAtB,CAAkCzF,OAAlC,IAA6C,0BAA1D;AACH;AACD;AACJ;AACI;AA1DR;AA4DA,gBAAIoF,UAAJ,EAAgB;AACZrI,wBAAQiG,UAAR,GACK9F,KADL,CACW,SADX,EACsB,GADtB,EAEKA,KAFL,CAEW,MAFX,EAEoB7E,GAAGkL,KAAH,CAASqC,KAAT,GAAiB,EAAlB,GAAwB,IAF3C,EAGK1I,KAHL,CAGW,KAHX,EAGmB7E,GAAGkL,KAAH,CAASsC,KAAT,GAAiB,EAAlB,GAAwB,IAH1C,EAIK3I,KAJL,CAIW,QAJX,EAIqBvE,sBAAsBiD,aAJ3C,EAKKsB,KALL,CAKW,OALX,EAKoB+F,OAAOtK,sBAAsBkD,YAA7B,IAA6C,IALjE;AAMH;AACDxD,eAAG8D,MAAH,OAAc6D,QAAQyB,UAAtB,EACKxE,IADL,CACU,GADV,EACe,UAAC+C,OAAD;AAAA,uBAAarH,sBAAsB+K,gBAAtB,CAAuC1D,OAAvC,EAAgD,KAAhD,CAAb;AAAA,aADf,EAEK9C,KAFL,CAEW,MAFX,EAEmBmI,cAFnB,EAGKnI,KAHL,CAGW,SAHX,EAGsB,CAHtB;AAIA;AACH;AACD;;;;;;;;;;;0CAQkB8C,O,EAAS7F,mB,EAAqBE,iB,EAAmB0C,O,EAAS+I,W,EAAa;AACrF,gBAAIC,UAAU,IAAIzB,IAAJ,GAAWC,OAAX,EAAd;AACA5L,kCAAsB2M,mBAAtB,CAA0C,yBAA1C,EAAqEtF,OAArE,EAA8EA,QAAQ5G,KAAtF;AACA,gBAAIT,sBAAsB+C,mBAAtB,CAA0CqD,OAA1C,CAAkDiB,OAAlD,IAA6D,CAAC,CAAlE,EAAqE;AACjE;AACH;AACD3H,eAAG8D,MAAH,OAAc6D,QAAQyB,UAAtB,EACKuB,UADL,GAEK/F,IAFL,CAEU,GAFV,EAEe,UAAC+I,GAAD;AAAA,uBAASrN,sBAAsB+K,gBAAtB,CAAuCsC,GAAvC,CAAT;AAAA,aAFf,EAGK9I,KAHL,CAGW,MAHX,EAGmB8C,QAAQmF,YAH3B,EAIKjI,KAJL,CAIW,SAJX,EAIsB,YAAM;AACxB,uBAAOvE,sBAAsBkJ,cAAtB,CAAqC7B,QAAQmF,YAA7C,CAAP;AACH,aAND;AAOA,gBAAIW,WAAJ,EAAiB;AACb/I,wBAAQiG,UAAR,GACK9F,KADL,CACW,SADX,EACsB,CADtB;AAEA,oBAAK6I,UAAUpN,sBAAsB6C,WAAjC,GAAgD,GAApD,EAAyD;AACrDZ,2BAAO8J,UAAP,CAAkB,YAAM;AACpB/L,8CAAsB4M,cAAtB,CAAqCvF,OAArC,EAA8C,IAA9C,EAAoD7F,mBAApD;AACH,qBAFD,EAEG,EAFH;AAGH;AACJ;AACJ;AACD;;;;;;;6CAIqBE,iB,EAAmB;AAAA;;AAAA,gBAC9B0C,OAD8B,GAC0C,IAD1C,CAC9BA,OAD8B;AAAA,gBACrB+C,kBADqB,GAC0C,IAD1C,CACrBA,kBADqB;AAAA,gBACD3F,mBADC,GAC0C,IAD1C,CACDA,mBADC;AAAA,gBACoB0F,iBADpB,GAC0C,IAD1C,CACoBA,iBADpB;;AAEpC,iBAAK3G,MAAL,CAAYC,OAAZ,CAAoB,UAACC,KAAD,EAAW;AAC3B,oBAAI6M,WAAWtN,sBAAsBkB,gBAAtB,CAAuCT,KAAvC,CAAf;AACA,oBAAIT,sBAAsBuB,gBAAtB,CAAuC8B,MAAvC,IAAiD,CAArD,EAAwD;AACpDiK,+BAAWtN,sBAAsBuB,gBAAtB,CAAuC8E,KAAvC,CAA6C,CAA7C,CAAX;AACH;AACDiH,yBAAS9M,OAAT,CAAiB,UAAC6G,OAAD,EAAa;AAC1B,wBAAIA,QAAQyB,UAAR,IAAsB,EAA1B,EAA8B;AAC1B,4BAAMK,OAAOzJ,GAAG8D,MAAH,OAAc6D,QAAQyB,UAAtB,CAAb;AACAK,6BAAK5E,KAAL,CAAW,MAAX,EAAmB,OAAKlE,iBAAL,CAAuBgH,OAAvB,EAAgC3F,iBAAhC,CAAnB;AACAyH,6BAAK5E,KAAL,CAAW,SAAX,EAAsB,UAAC8C,OAAD,EAAa;AAC/B,mCAAOrH,sBAAsBkJ,cAAtB,CAAqC,OAAK7I,iBAAL,CAAuBgH,OAAvB,EAAgC3F,iBAAhC,CAArC,CAAP;AACH,yBAFD;AAGAyH,6BAAKzD,EAAL,CAAQ,WAAR,EAAqB,YAAY;AAC7B,gCAAIhG,GAAG8D,MAAH,OAAc6D,QAAQyB,UAAtB,EAAoCvE,KAApC,CAA0C,SAA1C,KAAwD,GAA5D,EACI;AACJ4C,+CAAmBE,OAAnB,EAA4B7F,mBAA5B,EAAiDE,iBAAjD,EAAoE0C,OAApE,EAA6E,IAA7E;AACH,yBAJD;AAKA+E,6BAAKzD,EAAL,CAAQ,UAAR,EAAoB,YAAY;AAC5B,gCAAIhG,GAAG8D,MAAH,OAAc6D,QAAQyB,UAAtB,EAAoCvE,KAApC,CAA0C,SAA1C,KAAwD,GAA5D,EACI;AACJtC,mCAAOoH,YAAP,CAAoBrJ,sBAAsB4C,SAA1C;AACAsE,8CAAkBG,OAAlB,EAA2B7F,mBAA3B,EAAgDE,iBAAhD,EAAmE0C,OAAnE,EAA4E,IAA5E;AACH,yBALD;AAMH;AACJ,iBAnBD;AAoBH,aAzBD;AA0BH;AACD;;;;;;;;;;iCAOSmJ,U,EAAYhB,W,EAAaxL,Y,EAAcD,I,EAAM;AAClDyM,uBAAWpF,IAAX,CAAgB,UAACqF,CAAD,EAAIC,CAAJ,EAAU;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAI,OAAO3M,KAAK0M,EAAElF,GAAP,CAAP,IAAsB,WAA1B,EAAuC;AACnC,2BAAO,CAAP;AACH,iBAFD,MAGK,IAAI,OAAOxH,KAAK2M,EAAEnF,GAAP,CAAP,IAAsB,WAA1B,EAAuC;AACxC,2BAAO,CAAC,CAAR;AACH,iBAFI,MAGA,IAAI,OAAOvH,aAAayM,EAAElF,GAAf,CAAP,IAA8B,WAAlC,EAA+C;AAChD,2BAAO,CAAC,CAAR;AACH,iBAFI,MAGA,IAAI,OAAOvH,aAAa0M,EAAEnF,GAAf,CAAP,IAA8B,WAAlC,EAA+C;AAChD,2BAAO,CAAP;AACH,iBAFI,MAGA,IAAIvH,aAAayM,EAAElF,GAAf,EAAoBvH,YAApB,CAAiCsC,MAAjC,GAA0CtC,aAAa0M,EAAEnF,GAAf,EAAoBvH,YAApB,CAAiCsC,MAA/E,EAAuF;AACxF,2BAAO,CAAP;AACH,iBAFI,MAGA;AACD,2BAAO,CAAC,CAAR;AACH;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH,aAnED;AAoEH;AACD;;;;;;;;;AA+DA;;;mCAGW;AACP,iBAAKqK,aAAL,GAAqBhO,GAAG8D,MAAH,CAAU,qBAAV,EAAiCa,MAAjC,CAAwC,KAAxC,EAChBC,IADgB,CACX,OADW,EACF,UADE,EACUD,MADV,CACiB,OADjB,EAEhBC,IAFgB,CAEX,OAFW,EAEF,oCAFE,CAArB;AAGA5E,eAAG8D,MAAH,CAAU,qBAAV,EAAiCa,MAAjC,CAAwC,OAAxC,EACKC,IADL,CACU,OADV,EACmB,qBADnB,EAC0CD,MAD1C,CACiD,OADjD,EAC0DA,MAD1D,CACiE,IADjE,EACuEC,IADvE,CAC4E,IAD5E,EACkF,cADlF;AAEA5E,eAAG8D,MAAH,CAAU,eAAV,EAA2Ba,MAA3B,CAAkC,IAAlC,EAAwCC,IAAxC,CAA6C,OAA7C,EAAsD,qBAAtD,EAA6Eb,IAA7E,CAAkF,OAAlF,EACKc,KADL,CACW,OADX,EACoB,KADpB,EAC2BA,KAD3B,CACiC,WADjC,EAC8C,MAD9C,EACsDA,KADtD,CAC4D,YAD5D,EAC0E,OAD1E;AAEA7E,eAAG8D,MAAH,CAAU,eAAV,EAA2Ba,MAA3B,CAAkC,IAAlC,EAAwCC,IAAxC,CAA6C,OAA7C,EAAsD,qBAAtD,EAA6Eb,IAA7E,CAAkF,IAAlF,EACKc,KADL,CACW,OADX,EACoB,KADpB,EAC2BA,KAD3B,CACiC,WADjC,EAC8C,MAD9C,EACsDA,KADtD,CAC4D,YAD5D,EAC0E,OAD1E;AAEA7E,eAAG8D,MAAH,CAAU,eAAV,EAA2Ba,MAA3B,CAAkC,IAAlC,EAAwCC,IAAxC,CAA6C,OAA7C,EAAsD,qBAAtD,EAA6Eb,IAA7E,CAAkF,IAAlF,EACKc,KADL,CACW,OADX,EACoB,KADpB,EAC2BA,KAD3B,CACiC,WADjC,EAC8C,MAD9C,EACsDA,KADtD,CAC4D,YAD5D,EAC0E,OAD1E;AAEA7E,eAAG8D,MAAH,CAAU,eAAV,EAA2Ba,MAA3B,CAAkC,IAAlC,EAAwCC,IAAxC,CAA6C,OAA7C,EAAsD,qBAAtD,EAA6Eb,IAA7E,CAAkF,KAAlF,EACKc,KADL,CACW,OADX,EACoB,KADpB,EAC2BA,KAD3B,CACiC,WADjC,EAC8C,MAD9C,EACsDA,KADtD,CAC4D,YAD5D,EAC0E,OAD1E;AAEA7E,eAAG8D,MAAH,CAAU,eAAV,EAA2Ba,MAA3B,CAAkC,IAAlC,EAAwCC,IAAxC,CAA6C,OAA7C,EAAsD,qBAAtD,EAA6Eb,IAA7E,CAAkF,KAAlF,EACKc,KADL,CACW,OADX,EACoB,KADpB,EAC2BA,KAD3B,CACiC,WADjC,EAC8C,MAD9C,EACsDA,KADtD,CAC4D,YAD5D,EAC0E,OAD1E;AAEH;AACD;;;;;;;;kCAKUoJ,W,EAAapB,W,EAAa;AAChC,gBAAIvK,UAAU,EAAd;AADgC,gBAExB3B,iBAFwB,GAEF,IAFE,CAExBA,iBAFwB;;AAGhC,gBAAI4B,OAAOC,MAAP,CAAcC,UAAd,GAA2B,IAA/B,EAAqC;AACjCH,0BAAU,EAAV;AACH;AACD,gBAAIC,OAAOC,MAAP,CAAchC,KAAd,GAAsB,GAA1B,EAA+B;AAC3B8B,0BAAU,CAAV;AACH;AACD,gBAAMI,cAAc;AAChBC,wBAAQ3C,GAAG4C,MAAH,GAAYC,IAAZ,CAAiB7C,GAAG8C,YAApB,EAAkCC,IAAlC,CAAuC,EAAvC,CADQ;AAEhBC,0BAAUhD,GAAG4C,MAAH,GAAYC,IAAZ,CAAiB7C,GAAGiD,cAApB,EAAoCF,IAApC,CAAyC,EAAzC;AAFM,aAApB;AAIA,gBAAMmL,OAAO,KAAKF,aAAL,CAAmBnI,SAAnB,CAA6B,UAA7B,EACRkD,IADQ,CACHkF,WADG,EACU,UAAC7L,CAAD;AAAA,uBAAOA,EAAEwG,GAAT;AAAA,aADV,CAAb;AAEAsF,iBAAKlF,KAAL,GACKrE,MADL,CACY,IADZ,EAEKqB,EAFL,CAEQ,WAFR,EAEqB,UAAU5D,CAAV,EAAa;AAC9BpC,mBAAG8D,MAAH,CAAU,IAAV,EACKe,KADL,CACW,kBADX,EAC+B,SAD/B,EAEKA,KAFL,CAEW,QAFX,EAEqB,SAFrB;AAGA7E,mBAAG8D,MAAH,CAAU,MAAM,GAAN,GAAY1B,EAAEgG,OAAd,GAAwB,GAAxB,GAA8BhG,EAAEkG,OAAhC,GAA0C,GAA1C,GAAgDlG,EAAEwG,GAA5D,EACKhE,IADL,CACU,GADV,EACe,UAAC+I,GAAD,EAAS;AACpB,wBAAIA,IAAI/F,EAAJ,KAAW,KAAf,EAAsB;AAClBlF,oCAAYM,QAAZ,CAAqBD,IAArB,CAA0B,GAA1B;AACA,+BAAOL,YAAYM,QAAZ,EAAP;AACH;AACDN,gCAAYC,MAAZ,CAAmBI,IAAnB,CAAwB,GAAxB;AACA,2BAAOL,YAAYC,MAAZ,EAAP;AACH,iBARD,EASKkC,KATL,CASW,MATX,EASmB,UAAC8C,OAAD;AAAA,2BAAahH,kBAAkBgH,OAAlB,EAA2BkF,WAA3B,CAAb;AAAA,iBATnB;AAUH,aAhBD;AAiBI;AAjBJ,aAkBK7G,EAlBL,CAkBQ,UAlBR,EAkBoB,UAAU2B,OAAV,EAAmB;AACnC3H,mBAAG8D,MAAH,CAAU,IAAV,EACKe,KADL,CACW,kBADX,EAC+B,aAD/B,EAEKA,KAFL,CAEW,QAFX,EAEqB,SAFrB;AAGA;AACA7E,mBAAG8D,MAAH,OAAc6D,QAAQC,EAAtB,SAA4BD,QAAQS,OAApC,SAA+CT,QAAQW,OAAvD,SAAkEX,QAAQiB,GAA1E,SAAiFjB,QAAQ5G,KAAzF,EACK4J,UADL;AAEI;AAFJ,iBAGK/F,IAHL,CAGU,GAHV,EAGe,UAAC+I,GAAD,EAAS;AACpB,wBAAIA,IAAI/F,EAAJ,KAAW,KAAf,EAAsB;AAClBlF,oCAAYM,QAAZ,CAAqBD,IAArB,CAA0BT,OAA1B;AACA,+BAAOI,YAAYM,QAAZ,EAAP;AACH;AACDN,gCAAYC,MAAZ,CAAmBI,IAAnB,CAAwBT,OAAxB;AACA,2BAAOI,YAAYC,MAAZ,EAAP;AACH,iBAVD,EAWKkC,KAXL,CAWW,MAXX,EAWmB,UAAC8C,OAAD;AAAA,2BAAahH,kBAAkBgH,OAAlB,EAA2BkF,WAA3B,CAAb;AAAA,iBAXnB,EAYKhI,KAZL,CAYW,yBAZX,EAYsC,KAZtC;AAaH,aApCD,EAqCKgB,SArCL,CAqCe,IArCf,EAsCKkD,IAtCL,CAsCU,UAAC3G,CAAD;AAAA,uBAAO,CAACA,EAAEgG,OAAH,EAAYhG,EAAEwG,GAAd,EAAmBxG,EAAEwF,EAArB,EAAyBxF,EAAEiH,GAA3B,EAAgCjH,EAAEkH,GAAlC,CAAP;AAAA,aAtCV,EAuCKN,KAvCL,GAwCKrE,MAxCL,CAwCY,IAxCZ,EAyCKC,IAzCL,CAyCU,IAzCV,EAyCgB,SAzChB,EA0CKC,KA1CL,CA0CW,OA1CX,EA0CoB,KA1CpB,EA2CKA,KA3CL,CA2CW,WA3CX,EA2CwB,MA3CxB,EA4CKA,KA5CL,CA4CW,YA5CX,EA4CyB,OA5CzB,EA6CKd,IA7CL,CA6CU,UAAC3B,CAAD;AAAA,uBAAOA,CAAP;AAAA,aA7CV;AA8CA8L,iBAAKC,IAAL,GAAYrI,MAAZ;AACA;AACA,gBAAMsI,QAAQF,KAAKrI,SAAL,CAAe,IAAf,EACTkD,IADS,CACJ,UAAC3G,CAAD;AAAA,uBAAO,CAACA,EAAEgG,OAAH,EAAYhG,EAAEwG,GAAd,EAAmBxG,EAAEwF,EAArB,EAAyBxF,EAAEiH,GAA3B,EAAgCjH,EAAEkH,GAAlC,CAAP;AAAA,aADI,EAETvF,IAFS,CAEJ,UAAC3B,CAAD;AAAA,uBAAOA,CAAP;AAAA,aAFI,CAAd;AAGA;AACAgM,kBAAMpF,KAAN,GACKrE,MADL,CACY,IADZ,EAEKZ,IAFL,CAEU,UAAC3B,CAAD;AAAA,uBAAOA,CAAP;AAAA,aAFV;AAGAgM,kBAAMD,IAAN,GAAarI,MAAb;AACH;;;qCAlgCmBhE,mB,EAAqBuM,iB,EAAmB;AACxD/N,kCAAsBgO,WAAtB;AACA,gBAAI9N,QAAQF,sBAAsBE,KAAlC;AAAA,gBAAyCD,SAASD,sBAAsBC,MAAxE;AACA,gBAAMgO,MAAM,IAAIC,KAAJ,EAAZ;AACA,gBAAMC,SAAS,IAAID,KAAJ,EAAf;AACA,oBAAQ1M,mBAAR;AACI,qBAAK,CAAL;AACIyM,wBAAIG,GAAJ,GAAUvO,kBAAkBwO,cAA5B;AACAF,2BAAOC,GAAP,GAAatO,eAAewO,kBAA5B;AACA;AACJ,qBAAK,CAAL;AACIL,wBAAIG,GAAJ,GAAUvO,kBAAkB0O,MAA5B;AACAJ,2BAAOC,GAAP,GAAatO,eAAe0O,UAA5B;AACA;AACJ,qBAAK,CAAL;AACIP,wBAAIG,GAAJ,GAAUvO,kBAAkB0H,MAA5B;AACA4G,2BAAOC,GAAP,GAAatO,eAAe2O,UAA5B;AACA;AACJ,qBAAK,CAAL;AACIR,wBAAIG,GAAJ,GAAUvO,kBAAkB6O,GAA5B;AACAP,2BAAOC,GAAP,GAAatO,eAAe6O,OAA5B;AACA;AACJ,qBAAK,CAAL;AACIV,wBAAIG,GAAJ,GAAUvO,kBAAkB+O,QAA5B;AACAT,2BAAOC,GAAP,GAAatO,eAAe+O,YAA5B;AACA;AACJ,qBAAK,CAAL;AACIZ,wBAAIG,GAAJ,GAAUvO,kBAAkBiP,MAA5B;AACAX,2BAAOC,GAAP,GAAatO,eAAeiP,UAA5B;AACA;AACJ;AACI;AA1BR;AA4BA,gBAAMC,UAAUhP,sBAAsBoF,eAAtB,CAAsC+D,IAAtC,GAA6C8F,UAA7C,CAAwD,IAAxD,CAAhB;AACAD,oBAAQE,SAAR,CAAkB,CAAlB,EAAqB,CAArB,EAAwBhP,QAAQ,EAAhC,EAAoCD,SAAS,EAA7C;AACA,gBAAI8N,qBAAqB,CAAzB,EAA4B;AACxBiB,wBAAQG,WAAR,GAAsB,GAAtB;AACAlB,oBAAImB,MAAJ,GAAa,YAAM;AACfJ,4BAAQK,SAAR,CAAkBpB,GAAlB,EAAuB,CAAvB,EAA0B,CAA1B,EAA6B/N,KAA7B,EAAoCD,SAASgO,IAAIhO,MAAb,GAAsBgO,IAAI/N,KAA9D;AACH,iBAFD;AAGH,aALD,MAMK;AACD8O,wBAAQG,WAAR,GAAsB,CAAtB;AACAhB,uBAAOiB,MAAP,GAAgB,YAAM;AAClBJ,4BAAQK,SAAR,CAAkBlB,MAAlB,EAA0B,CAA1B,EAA6B,CAA7B,EAAgCjO,KAAhC,EAAuCD,SAASkO,OAAOlO,MAAhB,GAAyBkO,OAAOjO,KAAvE;AACH,iBAFD;AAGH;AACJ;;;qCA6XmBmH,O,EAAS;AACzB,gBAAIrH,sBAAsBe,YAAtB,CAAmCsG,QAAQ5G,KAA3C,EAAkD4G,QAAQiB,GAA1D,KAAkEgH,SAAtE,EAAiF;AAC7E,oBAAIC,iBAAiBvP,sBAAsBe,YAAtB,CAAmCsG,QAAQ5G,KAA3C,EAAkD4G,QAAQiB,GAA1D,EAA+DvH,YAApF;AACA,oBAAIwO,eAAezD,QAAf,CAAwB,SAAxB,CAAJ,EAAwC;AACpC9L,0CAAsB8G,OAAtB,CAA8BO,QAAQ5G,KAAtC;AACH;AACD,oBAAI8O,eAAezD,QAAf,CAAwB,uBAAxB,CAAJ,EAAsD;AAClD9L,0CAAsBgH,oBAAtB,CAA2CK,QAAQ5G,KAAnD;AACH;AACD,oBAAI8O,eAAezD,QAAf,CAAwB,oBAAxB,CAAJ,EAAmD;AAC/C9L,0CAAsB+G,iBAAtB,CAAwCM,QAAQ5G,KAAhD;AACH;AACJ;AACD,gBAAI,OAAOT,sBAAsBc,IAAtB,CAA2BuG,QAAQ5G,KAAnC,EAA0C4G,QAAQiB,GAAlD,CAAP,IAAiE,WAArE,EAAkF;AAC9EtI,sCAAsBiH,SAAtB,CAAgCI,QAAQ5G,KAAxC;AACH;AACJ;;;uCAyDqB+O,S,EAAW;AAC7B,gBAAIA,aAAa,SAAjB,EACI,OAAO,GAAP;AACJ,gBAAIA,aAAa,OAAb,IAAwBA,aAAa,MAAzC,EACI,OAAO,IAAP;AACJ,gBAAIA,aAAa,MAAjB,EACI,OAAO,GAAP;AACJ,mBAAO,CAAP;AACH;AACD;;;;;;;;;mCAMkBhO,mB,EAA8B;AAAA,gBAAT8F,EAAS,uEAAJ,EAAI;;AAC5C,mBAAOrF,OAAO8J,UAAP,CAAkB,YAAM;AAC3B/L,sCAAsB+F,YAAtB,CAAmCvE,mBAAnC,EAAwDxB,sBAAsByB,oBAA9E;AACAzB,sCAAsByP,aAAtB,CAAoCnI,EAApC;AACH,aAHM,EAGJ,GAHI,CAAP;AAIH;AACD;;;;;;;;;4CAM2BoI,I,EAAMrI,O,EAAS5G,K,EAAO;AAC7C,gBAAMmK,QAAQ,IAAI+E,WAAJ,CAAgBD,IAAhB,EAAsB,EAAE1D,QAAQ;AACtClE,6BAAST,QAAQS,OADqB;AAEtCuD,8BAAUhE,QAAQW,OAFoB;AAGtC4H,2BAAOnP,KAH+B;AAItC2K,iCAAa/D,QAAQC,EAJiB;AAKtCgE,mCAAejE,QAAQuB;AALe,iBAAV,EAAtB,CAAd;AAOA3G,mBAAO4N,aAAP,CAAqBjF,KAArB;AACH;AACD;;;;;;;;;uCAMsBvD,O,EAAgD;AAAA,gBAAvCyI,SAAuC,uEAA3B,IAA2B;AAAA,gBAArBtO,mBAAqB;;AAClExB,kCAAsB6C,WAAtB,GAAoC,IAAI8I,IAAJ,GAAWC,OAAX,EAApC;AACA,oBAAQvE,QAAQC,EAAhB;AACI,qBAAK,KAAL;AACA,qBAAK,KAAL;AACI,wBAAI9F,uBAAuB,CAA3B,EAA8B;AAC1B,4BAAIsO,SAAJ,EAAe;AACX9P,kDAAsB+F,YAAtB,CAAmCvE,mBAAnC,EAAwDxB,sBAAsByB,oBAA9E;AACAzB,kDAAsByP,aAAtB,CAAoC,SAApC,EAA+C,KAA/C;AACH,yBAHD,MAIK;AACDzP,kDAAsB4C,SAAtB,GAAkC5C,sBAAsB+P,UAAtB,CAAiC,CAAjC,EAAoC,SAApC,CAAlC;AACH;AACJ;AACD;AACJ,qBAAK,KAAL;AACI,wBAAIvO,uBAAuB,CAA3B,EAA8B;AAC1B,4BAAIsO,SAAJ,EAAe;AACX9P,kDAAsB+F,YAAtB,CAAmCvE,mBAAnC,EAAwDxB,sBAAsByB,oBAA9E;AACAzB,kDAAsByP,aAAtB,CAAoC,KAApC,EAA2C,KAA3C;AACH,yBAHD,MAIK;AACDzP,kDAAsB4C,SAAtB,GAAkC5C,sBAAsB+P,UAAtB,CAAiC,CAAjC,EAAoC,KAApC,CAAlC;AACH;AACJ;AACD;AACJ,qBAAK,KAAL;AACI,wBAAIvO,sBAAsB,CAA1B,EAA6B;AACzB,4BAAIsO,SAAJ,EAAe;AACX9P,kDAAsB+F,YAAtB,CAAmCvE,mBAAnC,EAAwDxB,sBAAsByB,oBAA9E;AACAzB,kDAAsByP,aAAtB,CAAoC,KAApC,EAA2C,KAA3C;AACH,yBAHD,MAIK;AACD,gCAAIpI,QAAQG,UAAR,KAAuB,IAAvB,IAA+BH,QAAQC,EAAR,KAAe,KAAlD,EAAyD;AACrDtH,sDAAsB4C,SAAtB,GAAkC5C,sBAAsB+P,UAAtB,CAAiC,CAAjC,EAAoC,KAApC,CAAlC;AACA;AACH;AACD,gCAAI1I,QAAQG,UAAR,KAAuB,GAAvB,IAA8BH,QAAQC,EAAR,KAAe,KAAjD,EAAwD;AACpDtH,sDAAsB4C,SAAtB,GAAkC5C,sBAAsB+P,UAAtB,CAAiC,CAAjC,EAAoC,KAApC,CAAlC;AACA;AACH;AACJ;AACJ;AACD;AACJ;AACI;AA3CR;AA6CA,gBAAI1I,QAAQE,MAAZ,EAAoB;AAChB,oBAAI/F,uBAAuB,CAA3B,EAA8B;AAC1B,wBAAIsO,SAAJ,EAAe;AACX9P,8CAAsB+F,YAAtB,CAAmCvE,mBAAnC,EAAwDxB,sBAAsByB,oBAA9E;AACAzB,8CAAsByP,aAAtB,CAAoC,EAApC,EAAwC,KAAxC;AACH,qBAHD,MAIK;AACDzP,8CAAsB4C,SAAtB,GAAkC5C,sBAAsB+P,UAAtB,CAAiC,CAAjC,EAAoC,EAApC,CAAlC;AACH;AACJ;AACJ;AACJ;AACD;;;;;;;;oCAKmB1I,O,EAAS;AACxB;AACA,2BAAaA,QAAQ5G,KAAR,CAAcuP,WAAd,EAAb,YAA+C3I,QAAQS,OAAvD,SAAkET,QAAQuB,YAA1E,SAA0FvB,QAAQC,EAAlG,yBAAwHD,QAAQ0B,GAAhI,qBAAmJ1B,QAAQ2B,GAA3J;AACH;AACD;;;;;;;;;yCAMwB3B,O,EAAyB;AAAA,gBAAhB4I,OAAgB,uEAAN,IAAM;;AAC7C,gBAAIjO,UAAU,EAAd;AACA,gBAAIC,OAAOC,MAAP,CAAcC,UAAd,GAA2B,IAA/B,EAAqC;AACjCH,0BAAU,EAAV;AACH;AACD,gBAAIC,OAAOC,MAAP,CAAchC,KAAd,GAAsB,GAA1B,EAA+B;AAC3B8B,0BAAU,CAAV;AACH;AACD,gBAAIS,OAAO,GAAX;AACA,gBAAIwN,OAAJ,EAAa;AACTxN,uBAAOT,OAAP;AACH;AACD,gBAAIqF,QAAQC,EAAR,KAAe,KAAnB,EAA0B;AACtBtH,sCAAsBoC,WAAtB,CAAkCM,QAAlC,CAA2CD,IAA3C,CAAgDA,IAAhD;AACA,uBAAOzC,sBAAsBoC,WAAtB,CAAkCM,QAAlC,EAAP;AACH;AACD1C,kCAAsBoC,WAAtB,CAAkCC,MAAlC,CAAyCI,IAAzC,CAA8CA,IAA9C;AACA,mBAAOzC,sBAAsBoC,WAAtB,CAAkCC,MAAlC,EAAP;AACH;;;sCA4OoB6N,c,EAAsC;AAAA,gBAAtBC,aAAsB,uEAAN,IAAM;;AACvD,gBAAIzI,WAAWwI,eAAeE,KAAf,CAAqB,GAArB,CAAf;AACA,gBAAIC,cAAJ;AACA,gBAAIC,WAAW,IAAf;AACAtQ,kCAAsBM,SAAtB,CAAgCE,OAAhC,CAAwC,UAACE,GAAD,EAAS;AAC7C,oBAAI4M,WAAWtN,sBAAsBkB,gBAAtB,CAAuCR,IAAI2L,KAA3C,EAAkDhG,KAAlD,CAAwD,CAAxD,CAAf;AACA,oBAAIrG,sBAAsBuB,gBAAtB,CAAuC8B,MAAvC,IAAiD,CAArD,EAAwD;AACpDiK,+BAAWtN,sBAAsBuB,gBAAtB,CAAuC8E,KAAvC,CAA6C,CAA7C,CAAX;AACH;AACD,oBAAI6J,kBAAkB,EAAtB,EAA0B;AACtBG,4BAAQ/C,SAASrB,MAAT,CAAgB,UAAC5E,OAAD,EAAa;AACjC,4BAAIA,QAAQE,MAAR,IAAkB,IAAtB,EACI,OAAOF,OAAP;AACP,qBAHO,CAAR;AAIH,iBALD,MAMK,IAAIK,SAASrE,MAAT,GAAkB,CAAtB,EAAyB;AAC1BgN,4BAAQ/C,SAASrB,MAAT,CAAgB,UAAC5E,OAAD,EAAa;AACjC,+BAAQK,SAAStB,OAAT,CAAiBiB,QAAQC,EAAzB,KAAgC,CAAC,CAAzC;AACH,qBAFO,CAAR;AAGH,iBAJI,MAKA;AACD+I,4BAAQ/C,SAASrB,MAAT,CAAgB,UAAC5E,OAAD,EAAa;AACjC,+BAAQA,QAAQC,EAAR,IAAc4I,cAAtB;AACH,qBAFO,CAAR;AAGH;AACDG,sBAAM7P,OAAN,CAAc,UAAC6G,OAAD,EAAa;AACvB,wBAAIA,QAAQyB,UAAR,IAAsB,EAA1B,EACI;AACJ,wBAAIK,OAAOzJ,GAAG8D,MAAH,OAAc6D,QAAQyB,UAAtB,CAAX;AACA,wBAAIqH,aAAJ,EACIhH,KAAK5E,KAAL,CAAW,SAAX,EAAsB,MAAtB,EADJ,KAGI4E,KAAK5E,KAAL,CAAW,SAAX,EAAsB,OAAtB;AACJ,wBAAI+L,QAAJ,EAAc;AACV5Q,2BAAG6F,SAAH,CAAa,oBAAb,EAAmCgL,IAAnC,CAAwC,UAACC,IAAD,EAAU;AAC9C,gCAAIA,KAAKvG,eAAL,CAAqBrB,YAArB,IAAqCvB,QAAQuB,YAAjD,EAA+D;AAC3D,oCAAIuH,aAAJ,EACIzQ,GAAG8D,MAAH,OAAcgN,KAAK7H,EAAnB,EAAyBpE,KAAzB,CAA+B,SAA/B,EAA0C,MAA1C,EADJ,KAGI7E,GAAG8D,MAAH,OAAcgN,KAAK7H,EAAnB,EAAyBpE,KAAzB,CAA+B,SAA/B,EAA0C,OAA1C;AACP;AACD;AACA;AACA;AACA;AACH,yBAXD;AAYA;AACH;AACJ,iBAvBD;AAwBH,aA7CD;AA8CH;AACD;;;;;;sCAGqB;AACjB7E,eAAG8D,MAAH,CAAU,cAAV,EAA0B2G,KAA1B;AACAzK,eAAG6F,SAAH,CAAa,eAAb,EAA8BC,MAA9B;AACH;;;4BAviDuB;AACpB,mBAAO;AACHjF,wBAAQ;AACJgC,0BAAMkO,KADF;AAEJC,wCAAoB,IAFhB;AAGJC,4BAAQ,IAHJ;AAIJC,8BAAU;AAJN,iBADL;AAOHrN,8BAAc;AACVhB,0BAAMkO,KADI;AAEVG,8BAAU,gBAFA;AAGVF,wCAAoB,IAHV;AAIVC,4BAAQ;AAJE,iBAPX;AAaH/O,8BAAc;AACVW,0BAAMkO,KADI;AAEVG,8BAAU,gBAFA;AAGVF,wCAAoB,IAHV;AAIVC,4BAAQ;AAJE,iBAbX;AAmBHzQ,uBAAO;AACHqC,0BAAMsO,MADH;AAEHH,wCAAoB;AAFjB;AAnBJ,aAAP;AAwBH;;;;EA1B+B9Q,qBAAqBkR,c;;AA2oDzD9Q,sBAAsBc,IAAtB,GAA6B,EAA7B;AACAd,sBAAsBe,YAAtB,GAAqC,EAArC;AACAf,sBAAsBkB,gBAAtB,GAAyC,EAAzC;AACAlB,sBAAsBgH,oBAAtB,GAA6C,EAA7C;AACAhH,sBAAsB+G,iBAAtB,GAA0C,EAA1C;AACA/G,sBAAsB8G,OAAtB,GAAgC,EAAhC;AACA9G,sBAAsBiH,SAAtB,GAAkC,EAAlC;AACAjH,sBAAsB6G,OAAtB,GAAgC,EAAhC;AACA7G,sBAAsB4G,OAAtB,GAAgC,EAAhC;AACA5G,sBAAsBiB,YAAtB,GAAqC,EAArC;AACAgB,OAAO8O,cAAP,CAAsBC,MAAtB,CAA6B,wBAA7B,EAAuDhR,qBAAvD","file":"RamachandranComponent.js","sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst d3 = require(\"d3\");\r\nconst polymer_element_js_1 = require(\"@polymer/polymer/polymer-element.js\");\r\nconst HeatMapContours_1 = require(\"../contours/HeatMapContours\");\r\nconst LineContours_1 = require(\"../contours/LineContours\");\r\nrequire(\"bootstrap/dist/css/bootstrap.css\");\r\nrequire(\"../public/index.css\");\r\nrequire(\"../public/hint.min.css\");\r\nconst parsePdb_1 = require(\"./parsePdb\");\r\nclass RamachandranComponent extends polymer_element_js_1.PolymerElement {\r\n    static get properties() {\r\n        return {\r\n            pdbIds: {\r\n                type: Array,\r\n                reflectToAttribute: true,\r\n                notify: true,\r\n                observer: '_pdbIdsChanged'\r\n            },\r\n            chainsToShow: {\r\n                type: Array,\r\n                observer: '_chainsChanged',\r\n                reflectToAttribute: true,\r\n                notify: true\r\n            },\r\n            modelsToShow: {\r\n                type: Array,\r\n                observer: '_modelsChanged',\r\n                reflectToAttribute: true,\r\n                notify: true\r\n            },\r\n            width: {\r\n                type: Number,\r\n                reflectToAttribute: true\r\n            },\r\n        };\r\n    }\r\n    connectedCallback() {\r\n        super.connectedCallback();\r\n        // noinspection JSSuspiciousNameCombination\r\n        RamachandranComponent.height = this.width;\r\n        RamachandranComponent.width = this.width;\r\n        this.createChart = this.createChart.bind(this);\r\n        this.fillColorFunction = this.fillColorFunction.bind(this);\r\n        RamachandranComponent.parsedPdb = [];\r\n        this.pdbIds.forEach((pdbId) => {\r\n            const pdb = new parsePdb_1.default(pdbId);\r\n            pdb.downloadAndParse();\r\n            RamachandranComponent.parsedPdb.push(pdb);\r\n            RamachandranComponent.rsrz[pdbId] = pdb.rsrz;\r\n            RamachandranComponent.outliersType[pdbId] = pdb.outlDict;\r\n            RamachandranComponent.outliersList[pdbId] = [];\r\n            RamachandranComponent.residuesOnCanvas[pdbId] = [];\r\n            if (pdbId == '3us0') {\r\n                this.pdbIds.push('3us0_redo');\r\n                let pdbRedo = new parsePdb_1.default(`${pdbId}_redo`);\r\n                let json = require('./3us0.json');\r\n                pdbRedo.parse(json[`${pdbId}_redo`]);\r\n                RamachandranComponent.parsedPdb.push(pdbRedo);\r\n                RamachandranComponent.rsrz[`${pdbId}_redo`] = pdb.rsrz;\r\n                RamachandranComponent.outliersType[`${pdbId}_redo`] = pdb.outlDict;\r\n                RamachandranComponent.outliersList[`${pdbId}_redo`] = [];\r\n                RamachandranComponent.residuesOnCanvas[`${pdbId}_redo`] = [];\r\n            }\r\n        });\r\n        RamachandranComponent.hiddenResidues = [];\r\n        RamachandranComponent.selectedResidues = [];\r\n        this.ramaContourPlotType = 1;\r\n        RamachandranComponent.contourColoringStyle = 1;\r\n        this.residueColorStyle = 1;\r\n        this.modelsToShowNumbers = [];\r\n        this.modelsToShow.map((d) => {\r\n            this.modelsToShowNumbers.push(parseInt(d));\r\n        });\r\n        let objSize = 40;\r\n        if (window.screen.availWidth < 1920) {\r\n            objSize = 30;\r\n        }\r\n        if (window.screen.width < 350) {\r\n            objSize = 5;\r\n        }\r\n        // symbolTypes\r\n        RamachandranComponent.symbolTypes = {\r\n            circle: d3.symbol().type(d3.symbolCircle).size(objSize),\r\n            triangle: d3.symbol().type(d3.symbolTriangle).size(objSize)\r\n        };\r\n        RamachandranComponent.timeoutId = 0;\r\n        RamachandranComponent.currentTime = 0;\r\n        RamachandranComponent.lastTimeChanged = 0;\r\n        RamachandranComponent.highlightedResidues = [];\r\n        this.createChart();\r\n        this.lastSelection = {};\r\n        RamachandranComponent.tooltipHeight = 58;\r\n        RamachandranComponent.tooltipWidth = 90;\r\n    }\r\n    _pdbIdsChanged(newValue, oldValue) {\r\n        if (typeof oldValue == 'undefined' || newValue.length == 0)\r\n            return;\r\n        this.pdbIds.forEach((pdbId) => {\r\n            const pdb = new parsePdb_1.default(pdbId);\r\n            pdb.downloadAndParse();\r\n        });\r\n        this.updateChart(this.chainsToShow, this.ramaContourPlotType, this.modelsToShow);\r\n        // d3.select('#rama-info-pdbid').text(this.pdbId.toUpperCase());\r\n    }\r\n    _chainsChanged(newValue, oldValue) {\r\n        if (typeof oldValue == 'undefined')\r\n            return;\r\n        this.updateChart(this.chainsToShow, this.ramaContourPlotType, this.modelsToShow);\r\n        d3.select('#rama-info-chains').text(this.chainsToShow);\r\n    }\r\n    _modelsChanged(newValue, oldValue) {\r\n        if (typeof oldValue == 'undefined')\r\n            return;\r\n        this.updateChart(this.chainsToShow, this.ramaContourPlotType, this.modelsToShow);\r\n        d3.select('#rama-info-models').text(this.modelsToShow);\r\n    }\r\n    /**\r\n     * creates basic chart, add axes, creates tooltip\r\n     */\r\n    createChart() {\r\n        let width = RamachandranComponent.width, height = RamachandranComponent.height;\r\n        if (typeof width == 'undefined') {\r\n            RamachandranComponent.width = 500;\r\n            width = 500;\r\n        }\r\n        if (typeof height == 'undefined') {\r\n            RamachandranComponent.height = 500;\r\n            height = 500;\r\n        }\r\n        // setup x\r\n        const xScale = d3.scaleLinear()\r\n            .domain([-180, 180])\r\n            .range([0, (width)]);\r\n        let xBottomAxis = d3.axisBottom(xScale);\r\n        let xTopAxis = d3.axisTop(xScale);\r\n        const xValue = (d) => d['phi'];\r\n        this.xMap = (d) => xScale(xValue(d));\r\n        // tooltip\r\n        this.tooltip = d3.select('body').append('div')\r\n            .attr('class', 'rama-tooltip')\r\n            .attr('height', 0)\r\n            .style('opacity', 0);\r\n        this.tooltip2 = d3.select('body').append('div')\r\n            .attr('class', 'rama-tooltip')\r\n            .attr('height', 0)\r\n            .style('opacity', 0);\r\n        // setup y\r\n        const yScale = d3.scaleLinear()\r\n            .domain([180, -180])\r\n            .range([0, (height)]);\r\n        let yLeftAxis = d3.axisLeft(yScale);\r\n        let yRightAxis = d3.axisRight(yScale);\r\n        const yValue = (d) => d['psi'];\r\n        this.yMap = (d) => yScale(yValue(d));\r\n        function makeYGridlines() {\r\n            return d3.axisRight(yScale);\r\n        }\r\n        function makeXGridlines() {\r\n            return d3.axisTop(xScale);\r\n        }\r\n        //\r\n        this.svgContainer = d3.select('ramachandran-component').append('div')\r\n            .attr('id', 'rama-svg-container')\r\n            .style('max-width', `${width}px`)\r\n            .style('width', '100%')\r\n            .append('svg')\r\n            .classed('svg-container', true)\r\n            .attr('id', 'rama-svg')\r\n            .style('max-width', `${width}px`)\r\n            .style('width', '100%')\r\n            .style('padding', '30px 30px 30px 50px')\r\n            .attr('preserveAspectRatio', 'xMinYMin meet')\r\n            .attr('viewBox', `0 0 ${width} ${height}`)\r\n            .classed('svg-content-responsive', true)\r\n            .style('overflow', 'visible');\r\n        this.svgContainer.append(\"svg:defs\").append(\"svg:marker\")\r\n            .attr(\"id\", \"arrow\")\r\n            .attr(\"viewBox\", \"0 -5 10 10\")\r\n            .attr('refX', 8)\r\n            .attr(\"markerWidth\", 5)\r\n            .attr(\"markerHeight\", 5)\r\n            .attr(\"orient\", \"auto\")\r\n            .style('fill', '#aa5519')\r\n            .append(\"svg:path\")\r\n            .attr(\"d\", \"M0,-5L10,0L0,5\");\r\n        RamachandranComponent.canvasContainer = d3.select('#rama-svg-container')\r\n            .append('canvas')\r\n            .classed('img-responsive', true)\r\n            .attr('id', 'rama-canvas')\r\n            .attr('width', width)\r\n            .style('max-width', `${width - 90}px`)\r\n            .attr('height', height)\r\n            .classed('svg-content-responsive', true)\r\n            .attr('preserveAspectRatio', 'xMinYMin meet')\r\n            .attr('viewBox', `0 0 ${width} ${height}`)\r\n            .style('overflow', 'visible');\r\n        // // add axes\r\n        this.svgContainer.append('g')\r\n            .call(xTopAxis)\r\n            .attr('id', 'x-axis');\r\n        this.svgContainer.append('g')\r\n            .attr('transform', `translate(0, ${height})`)\r\n            .call(xBottomAxis)\r\n            .attr('id', 'x-axis');\r\n        this.svgContainer.append('g')\r\n            .call(yLeftAxis)\r\n            .attr('id', 'y-axis');\r\n        this.svgContainer.append('g')\r\n            .attr('transform', () => `translate(${width}, 0)`)\r\n            .call(yRightAxis)\r\n            .attr('id', 'y-axis');\r\n        this.svgContainer.append('g')\r\n            .attr('class', 'rama-grid')\r\n            .attr('transform', `translate(0, ${height})`)\r\n            .call(makeXGridlines()\r\n            .tickSize(width));\r\n        this.svgContainer.append('g')\r\n            .attr('class', 'rama-grid')\r\n            .call(makeYGridlines()\r\n            .tickSize(height));\r\n        // axis labels\r\n        // phi label\r\n        this.svgContainer.append('text')\r\n            .attr('x', width / 2)\r\n            .attr('y', height + 35)\r\n            .style('text-anchor', 'middle')\r\n            .style('fill', '#000')\r\n            .text('\\u03C6');\r\n        // psi label\r\n        this.svgContainer.append('text')\r\n            // .attr('x',  0 - (height / 2))\r\n            // .attr('y', -0)\r\n            .attr('x', '-35')\r\n            .attr('y', height / 2)\r\n            .style('text-anchor', 'middle')\r\n            .style('fill', '#000')\r\n            // .attr('transform', 'rotate(-90)')\r\n            .text('\\u03C8');\r\n        //\r\n        // // outliers headline\r\n        // d3.select('#rama-root').append('div')\r\n        //     .attr('class', 'rama-outliers-div')\r\n        //     .append('div')\r\n        //     .attr('class', 'rama-outliers-headline')\r\n        //     .append('h4')\r\n        //     .text('OUTLIERS');\r\n        //\r\n        // d3.select('.rama-outliers-div').append('div')\r\n        //     .attr('class', 'outliers-container');\r\n        d3.selectAll('g.rama-grid g.tick text').remove();\r\n        d3.select('#rama-svg-container').append('div').attr('id', 'rama-sum').attr('class', 'rama-set-cl');\r\n        d3.select('#rama-svg-container').append('div').attr('id', 'rama-settings').attr('class', 'rama-set-cl');\r\n        let colorSelect = d3.select('#rama-settings').append('div').style('display', 'inline-block')\r\n            .style('width', '15%').style('margin-right', '8px')\r\n            .append('select').attr('id', 'rama-coloring')\r\n            .attr('class', 'custom-select');\r\n        colorSelect.append('option').attr('value', 1).text('Default');\r\n        colorSelect.append('option').attr('value', 2).text('Quality');\r\n        colorSelect.append('option').attr('value', 3).text('RSRZ');\r\n        colorSelect.on('change', () => {\r\n            this.residueColorStyle = parseInt(d3.select('#rama-coloring').property('value'));\r\n            this.changeResiduesColors(this.residueColorStyle);\r\n            this.addSummaryInfo();\r\n        });\r\n        let plotTypeSelect = d3.select('#rama-settings').append('div').style('margin-right', '30px')\r\n            .style('display', 'inline-block').style('width', '28%')\r\n            .append('select').attr('id', 'rama-plot-type')\r\n            .attr('class', 'custom-select');\r\n        plotTypeSelect.append('option').attr('value', 1).text('General case');\r\n        plotTypeSelect.append('option').attr('value', 2).text('Isoleucine and valine');\r\n        plotTypeSelect.append('option').attr('value', 3).text('Pre-proline');\r\n        plotTypeSelect.append('option').attr('value', 4).text('Glycine');\r\n        plotTypeSelect.append('option').attr('value', 5).text('Trans proline');\r\n        plotTypeSelect.append('option').attr('value', 6).text('Cis proline');\r\n        plotTypeSelect.on('change', () => {\r\n            this.ramaContourPlotType = parseInt(d3.select('#rama-plot-type').property('value'));\r\n            this.updateChart(this.chainsToShow, this.ramaContourPlotType, this.modelsToShowNumbers);\r\n            RamachandranComponent.baseContours(this.ramaContourPlotType, RamachandranComponent.contourColoringStyle);\r\n        });\r\n        // if (this.pdbIds.length > 1) {\r\n        //\r\n        //     let distanceLines = d3.select('#rama-settings').append('select').attr('id', 'rama-distance-select');\r\n        //     distanceLines.append('option').attr('value', 1).text('Region change');\r\n        //     distanceLines.append('option').attr('value', 2).text('All');\r\n        //\r\n        //     distanceLines.on('change', () => {\r\n        //\r\n        //     });\r\n        // }\r\n        let ramaForm = d3.select('#rama-settings').append('form')\r\n            .attr('id', 'rama-contour-style')\r\n            .style('position', 'absolute')\r\n            .style('margin', '5px');\r\n        ramaForm.append('input')\r\n            .classed('form-check-input', true)\r\n            .attr('type', 'radio')\r\n            .attr('name', 'contour-style')\r\n            .attr('value', 1)\r\n            .attr('checked', true)\r\n            .classed('rama-contour-radio', true);\r\n        ramaForm.append('label').classed('rama-contour-style', true).text('Contour')\r\n            .attr('class', 'hint--right')\r\n            .attr('data-hint', 'Regions are displayed using lines.')\r\n            .style('margin-bottom', '0');\r\n        ramaForm.append('br');\r\n        ramaForm.append('input')\r\n            .classed('form-check-input', true)\r\n            .attr('type', 'radio')\r\n            .attr('name', 'contour-style')\r\n            .attr('value', 2)\r\n            .classed('rama-contour-radio', true);\r\n        ramaForm.append('label').classed('rama-contour-style', true).text('Heat Map')\r\n            .attr('class', 'hint--right')\r\n            .attr('data-hint', 'Regions are displayed heat map.')\r\n            .style('margin-bottom', '0');\r\n        ramaForm.on('change', () => {\r\n            RamachandranComponent.contourColoringStyle = parseInt(d3.select('input[name=\"contour-style\"]:checked').property('value'));\r\n            RamachandranComponent.baseContours(this.ramaContourPlotType, RamachandranComponent.contourColoringStyle);\r\n        });\r\n        let chainsString = '';\r\n        if (this.chainsToShow.length > 2) {\r\n            for (const chain of this.chainsToShow) {\r\n                chainsString += chain.toString() + ', ';\r\n                if (this.chainsToShow.indexOf(chain) == this.chainsToShow.length - 1)\r\n                    chainsString.slice(0, -2);\r\n                if (this.chainsToShow.indexOf(chain) == 2) {\r\n                    chainsString += '...';\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        else\r\n            chainsString = this.chainsToShow.toString();\r\n        let modelsString = '';\r\n        if (this.modelsToShow.length > 2) {\r\n            for (const model of this.modelsToShow) {\r\n                modelsString += model.toString() + ', ';\r\n                if (this.modelsToShow.indexOf(model) == this.modelsToShow.length - 1)\r\n                    modelsString.slice(0, -2);\r\n                if (this.modelsToShow.indexOf(model) == 2) {\r\n                    modelsString += '...';\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        else\r\n            modelsString = this.modelsToShow.toString();\r\n        let entryInfo = d3.select('#rama-settings').append('div').style('display', 'inline-block')\r\n            .style('position', 'absolute')\r\n            .style('width', '25%').style('margin', '5px 5px 5px 95px');\r\n        let chainsInfo = entryInfo.append('div');\r\n        chainsInfo.attr('id', 'rama-info-chains')\r\n            .append('b').text('Chains: ').style('margin-right', '5px');\r\n        chainsInfo.append('text').text(chainsString)\r\n            .attr('class', 'hint--top')\r\n            .attr('data-hint', this.chainsToShow);\r\n        let modelsInfo = entryInfo.append('div');\r\n        modelsInfo.append('b').text('Models: ');\r\n        modelsInfo.append('text').text(modelsString).style('text-align', 'center')\r\n            .attr('class', 'hint--top').attr('data-hint', this.modelsToShow);\r\n        this.updateChart(this.chainsToShow, this.ramaContourPlotType, this.modelsToShowNumbers);\r\n        RamachandranComponent.baseContours(this.ramaContourPlotType, RamachandranComponent.contourColoringStyle);\r\n        this.addEventListeners();\r\n        d3.select('#rama-canvas')\r\n            .style('max-width', `${width}px`)\r\n            .style('width', '100.5%')\r\n            .style('padding', '30px 30px 30px 50px');\r\n    }\r\n    /**\r\n     * change residues in chart\r\n     * @param {String[]} chainsToShow\r\n     * @param {number} ramaContourPlotType\r\n     * @param {number[]} modelsToShow\r\n     */\r\n    updateChart(chainsToShow, ramaContourPlotType, modelsToShow) {\r\n        this.svgContainer.selectAll('.dataGroup').remove();\r\n        this.pdbIds.forEach((pdbId) => {\r\n            RamachandranComponent.allowed[pdbId] = 0;\r\n            RamachandranComponent.favored[pdbId] = 0;\r\n            RamachandranComponent.clashes[pdbId] = 0;\r\n            RamachandranComponent.sideChainOutliers[pdbId] = 0;\r\n            RamachandranComponent.ramachandranOutliers[pdbId] = 0;\r\n            RamachandranComponent.rsrzCount[pdbId] = 0;\r\n            RamachandranComponent.residuesOnCanvas[pdbId] = [];\r\n            RamachandranComponent.outliersList[pdbId].length = 0;\r\n        });\r\n        // let width = 500;\r\n        const { fillColorFunction, tooltip, residueColorStyle, width, svgContainer, tooltip2 } = this;\r\n        let { onMouseOutResidue, onMouseOverResidue } = this;\r\n        // scales\r\n        const xScale = d3.scaleLinear()\r\n            .domain([-180, 180])\r\n            .range([0, (width)]);\r\n        // .range([0, (0.985 * width)]);\r\n        const yScale = d3.scaleLinear()\r\n            .domain([180, -180])\r\n            .range([0, (width)]);\r\n        /**\r\n         * determines which residues will be displayed depending on ramaContourPlotType\r\n         * @param residue\r\n         * @returns {Residue}\r\n         */\r\n        function switchPlotType(residue) {\r\n            switch (ramaContourPlotType) {\r\n                case 1:\r\n                    return residue;\r\n                case 2:\r\n                    if (residue.aa == 'ILE' || residue.aa == 'VAL') {\r\n                        return residue;\r\n                    }\r\n                    break;\r\n                case 3:\r\n                    if (residue.prePro)\r\n                        return residue;\r\n                    break;\r\n                case 4:\r\n                    if (residue.aa == 'GLY') {\r\n                        return residue;\r\n                    }\r\n                    break;\r\n                case 5:\r\n                    if (residue.cisPeptide == null && residue.aa == 'PRO') {\r\n                        return residue;\r\n                    }\r\n                    break;\r\n                case 6:\r\n                    if (residue.cisPeptide == 'Y' && residue.aa == 'PRO') {\r\n                        return residue;\r\n                    }\r\n                    break;\r\n                default:\r\n                    return residue;\r\n            }\r\n        }\r\n        // sort because of svg z-index\r\n        // outliersText\r\n        d3.selectAll('.outliers').remove();\r\n        d3.selectAll('table').remove();\r\n        function filterModels(pdb) {\r\n            let residues = [];\r\n            pdb.molecules.forEach((molecule) => {\r\n                molecule.chains.forEach((chain) => {\r\n                    if (chainsToShow.indexOf(chain.chainId) != -1) {\r\n                        chain.models.forEach((model) => {\r\n                            if (modelsToShow.indexOf(model.modelId) != -1) {\r\n                                model.residues.forEach((residue) => {\r\n                                    residue.modelId = model.modelId;\r\n                                    residue.chainId = chain.chainId;\r\n                                    if (switchPlotType(residue) && residue.rama != null) {\r\n                                        RamachandranComponent.residuesOnCanvas[residue.pdbId].push(residue);\r\n                                        residues.push(residue);\r\n                                    }\r\n                                });\r\n                            }\r\n                        });\r\n                    }\r\n                });\r\n            });\r\n            return residues;\r\n        }\r\n        let rsrz = RamachandranComponent.parsedPdb[0].rsrz;\r\n        let outliersType = RamachandranComponent.parsedPdb[0].outlDict;\r\n        let templatePdbResidues = filterModels(RamachandranComponent.parsedPdb[0]).sort((residue1, residue2) => {\r\n            if (typeof rsrz[residue1.num] != 'undefined') {\r\n                return 1;\r\n            }\r\n            else if (typeof rsrz[residue2.num] != 'undefined') {\r\n                return -1;\r\n            }\r\n            else if (typeof outliersType[residue1.num] == 'undefined') {\r\n                return -1;\r\n            }\r\n            else if (typeof outliersType[residue2.num] == 'undefined') {\r\n                return 1;\r\n            }\r\n            else if (outliersType[residue1.num].outliersType.length > outliersType[residue2.num].outliersType.length) {\r\n                return 1;\r\n            }\r\n            else {\r\n                return -1;\r\n            }\r\n        });\r\n        let templatePdb = this.pdbIds[0];\r\n        function addResiduesToCanvas(residues) {\r\n            svgContainer.selectAll('.shapes')\r\n                .data(residues)\r\n                .enter()\r\n                .append('g')\r\n                .attr('class', 'dataGroup')\r\n                .append('path')\r\n                .attr('id', (residue) => {\r\n                const id = `${residue.aa}-${residue.chainId}-${residue.modelId}-${residue.authorResNum}-${residue.pdbId}`;\r\n                // residue.aa + '-' + residue.chainId + '-' + residue.modelId + '-' + residue.num + residue.pdbId;\r\n                RamachandranComponent.computeStats(residue);\r\n                residue.idSelector = id;\r\n                if (residueColorStyle !== 3) {\r\n                    if (residue.rama === 'OUTLIER') {\r\n                        RamachandranComponent.outliersList[residue.pdbId].push(residue);\r\n                    }\r\n                    if (residue.rama === 'Favored') {\r\n                        RamachandranComponent.favored[residue.pdbId]++;\r\n                    }\r\n                    if (residue.rama === 'Allowed') {\r\n                        RamachandranComponent.allowed[residue.pdbId]++;\r\n                    }\r\n                    return id;\r\n                }\r\n                if (residue.rama === 'OUTLIER' && typeof RamachandranComponent.rsrz[residue.pdbId][residue.num] !== 'undefined') {\r\n                    RamachandranComponent.outliersList[residue.pdbId].push(residue);\r\n                    return id;\r\n                }\r\n                return id;\r\n            })\r\n                .attr('d', (residue) => {\r\n                if (residue.aa === 'GLY') {\r\n                    return RamachandranComponent.symbolTypes.triangle();\r\n                }\r\n                return RamachandranComponent.symbolTypes.circle();\r\n            })\r\n                .attr('transform', (residue) => `translate(${xScale(residue.phi)},${yScale(residue.psi)})`)\r\n                .merge(svgContainer)\r\n                // .style('fill', 'transparent')\r\n                .style('fill', (residue) => fillColorFunction(residue, residueColorStyle))\r\n                // .style('stroke', 'rgb(144, 142, 123)')\r\n                .style('opacity', (residue) => {\r\n                return RamachandranComponent.computeOpacity(fillColorFunction(residue, residueColorStyle));\r\n            })\r\n                .on('mouseover', function (node) {\r\n                if (d3.select(this).node().style.opacity == 0)\r\n                    return;\r\n                onMouseOverResidue(node, ramaContourPlotType, residueColorStyle, tooltip, true);\r\n            })\r\n                .on('mouseout', function (node) {\r\n                if (d3.select(this).node().style.opacity == 0)\r\n                    return;\r\n                window.clearTimeout(RamachandranComponent.timeoutId);\r\n                onMouseOutResidue(node, ramaContourPlotType, residueColorStyle, tooltip, true);\r\n            });\r\n        }\r\n        addResiduesToCanvas(templatePdbResidues);\r\n        let otherResidues = [];\r\n        RamachandranComponent.parsedPdb.forEach((pdb, index) => {\r\n            if (index < 1)\r\n                return;\r\n            otherResidues = otherResidues.concat(filterModels(pdb));\r\n        });\r\n        addResiduesToCanvas(otherResidues);\r\n        function getDistance(point1, point2) {\r\n            let xs = xScale(point1.phi) - xScale(point2.phi);\r\n            xs = xs * xs;\r\n            let ys = yScale(point1.psi) - yScale(point2.psi);\r\n            ys = ys * ys;\r\n            return Math.sqrt(xs + ys);\r\n        }\r\n        let distantResidues = [];\r\n        RamachandranComponent.residuesOnCanvas[templatePdb].forEach((residue) => {\r\n            this.pdbIds.forEach((pdbId, index) => {\r\n                if (index < 1)\r\n                    return;\r\n                let templateResidue = d3.select(`#${residue.idSelector.replace(residue.pdbId, pdbId)}`);\r\n                if (!templateResidue.empty()) {\r\n                    let residue2 = d3.select(`#${residue.idSelector}`).data()[0];\r\n                    if (templateResidue.data()[0].rama != residue2.rama) \r\n                    // let distance = getDistance(templateResidue.data()[0], residue2);\r\n                    // if (distance > 80)\r\n                    {\r\n                        distantResidues.push({ templateResidue: residue2, otherResidue: templateResidue.data()[0], id: `rama-line-${residue2.authorResNum}` });\r\n                    }\r\n                }\r\n            });\r\n        });\r\n        svgContainer.selectAll('line.rama-distance')\r\n            .data(distantResidues)\r\n            .enter()\r\n            .append('g')\r\n            .classed('dataGroup', true)\r\n            .append('line')\r\n            .attr('id', (d) => {\r\n            return d.id;\r\n        })\r\n            .attr('class', 'rama-distance')\r\n            .attr('x1', (d) => {\r\n            return xScale(d.templateResidue.phi);\r\n        })\r\n            .attr('y1', (d) => {\r\n            return yScale(d.templateResidue.psi);\r\n        })\r\n            .attr('y2', (d) => {\r\n            return yScale(d.otherResidue.psi);\r\n        })\r\n            .attr('x2', (d) => {\r\n            return xScale(d.otherResidue.phi);\r\n        })\r\n            .attr(\"stroke-width\", 2.5)\r\n            .attr(\"stroke\", \"#aa5519\")\r\n            .attr(\"marker-end\", \"url(#arrow)\")\r\n            .attr('opacity', '0.1')\r\n            .on('mouseover', function (node) {\r\n            onMouseOverResidue(node.templateResidue, ramaContourPlotType, residueColorStyle, tooltip, false);\r\n            onMouseOverResidue(node.otherResidue, ramaContourPlotType, residueColorStyle, tooltip2, false);\r\n            tooltip.transition()\r\n                .style('opacity', .95)\r\n                .style('left', xScale(node.templateResidue.phi) - 50 + 'px')\r\n                .style('top', yScale(node.templateResidue.psi) + 45 + 'px')\r\n                .style('height', RamachandranComponent.tooltipHeight)\r\n                .style('width', String(RamachandranComponent.tooltipWidth) + 'px');\r\n            tooltip2.transition()\r\n                .style('opacity', .95)\r\n                .style('left', xScale(node.otherResidue.phi) - 30 + 'px')\r\n                .style('top', yScale(node.otherResidue.psi) + 30 + 'px')\r\n                .style('height', RamachandranComponent.tooltipHeight)\r\n                .style('width', String(RamachandranComponent.tooltipWidth) + 'px');\r\n            d3.select(this).attr(\"stroke-width\", 3)\r\n                .attr('opacity', '0.8');\r\n        })\r\n            .on('mouseout', function (node) {\r\n            window.clearTimeout(RamachandranComponent.timeoutId);\r\n            onMouseOutResidue(node.templateResidue, ramaContourPlotType, residueColorStyle, tooltip, false);\r\n            onMouseOutResidue(node.otherResidue, ramaContourPlotType, residueColorStyle, tooltip, false);\r\n            tooltip.transition()\r\n                .style('opacity', 0);\r\n            tooltip2.transition()\r\n                .style('opacity', 0);\r\n            d3.select(this).attr(\"stroke-width\", 2.5)\r\n                .attr('opacity', '0.1');\r\n        });\r\n        // .on('click', function(d: any) {\r\n        //     if (highlightedResidues.length != 0) {\r\n        //         highlightedResidues.forEach((d: any) => {\r\n        //             d3.select('#' + d.idSelector)\r\n        //                 .attr('d', (d: any) => changeObjectSize(d)).transition().duration(50)\r\n        //                 .style('fill', (dat) => fillColorFunction(dat, drawingType, outliersType, rsrz))\r\n        //                 .style('opacity', (d) => {\r\n        //                     return RamachandranComponent.computeOpacity(fillColorFunction(d, drawingType, outliersType, rsrz))\r\n        //                 });\r\n        //         });\r\n        //         highlightedResidues.pop();\r\n        //     }\r\n        //     dispatchCustomEvent('PDB.ramaViewer.click', d);\r\n        //     highlightedResidues.push(d);\r\n        //     d3.select(this)\r\n        //         .attr('d', (d: any) => changeObjectSize(d, false))\r\n        //         .style('fill', 'magenta')\r\n        //         .style('opacity', 1);\r\n        //         // .style('fill', (dat) => fillColorFunction(dat, drawingType, outliersType, rsrz));\r\n        // });\r\n        this.pdbIds.forEach((pdbId) => {\r\n            RamachandranComponent.outliersList[pdbId].sort((residue1, residue2) => residue1.num - residue2.num);\r\n        });\r\n        this.addSummaryInfo();\r\n    }\r\n    /**\r\n     * add baseContours\r\n     * @param {number} ramaContourPlotType\r\n     * @param {number} contourColorStyle\r\n     */\r\n    static baseContours(ramaContourPlotType, contourColorStyle) {\r\n        RamachandranComponent.clearCanvas();\r\n        let width = RamachandranComponent.width, height = RamachandranComponent.height;\r\n        const img = new Image();\r\n        const svgImg = new Image();\r\n        switch (ramaContourPlotType) {\r\n            case 1:\r\n                img.src = HeatMapContours_1.generalContour;\r\n                svgImg.src = LineContours_1.lineGeneralContour;\r\n                break;\r\n            case 2:\r\n                img.src = HeatMapContours_1.ileVal;\r\n                svgImg.src = LineContours_1.lineIleVal;\r\n                break;\r\n            case 3:\r\n                img.src = HeatMapContours_1.prePro;\r\n                svgImg.src = LineContours_1.linePrePro;\r\n                break;\r\n            case 4:\r\n                img.src = HeatMapContours_1.gly;\r\n                svgImg.src = LineContours_1.lineGly;\r\n                break;\r\n            case 5:\r\n                img.src = HeatMapContours_1.transPro;\r\n                svgImg.src = LineContours_1.lineTransPro;\r\n                break;\r\n            case 6:\r\n                img.src = HeatMapContours_1.cisPro;\r\n                svgImg.src = LineContours_1.lineCisPro;\r\n                break;\r\n            default:\r\n                return;\r\n        }\r\n        const context = RamachandranComponent.canvasContainer.node().getContext('2d');\r\n        context.clearRect(0, 0, width + 80, height + 60);\r\n        if (contourColorStyle == 2) {\r\n            context.globalAlpha = 0.6;\r\n            img.onload = () => {\r\n                context.drawImage(img, 0, 0, width, height * img.height / img.width);\r\n            };\r\n        }\r\n        else {\r\n            context.globalAlpha = 1;\r\n            svgImg.onload = () => {\r\n                context.drawImage(svgImg, 0, 0, width, height * svgImg.height / svgImg.width);\r\n            };\r\n        }\r\n    }\r\n    /**\r\n     * add listeners from other components\r\n     */\r\n    addEventListeners() {\r\n        const clickEvents = ['PDB.litemol.click', 'PDB.topologyViewer.click'];\r\n        const mouseOutEvents = ['PDB.topologyViewer.mouseout', 'PDB.litemol.mouseout'];\r\n        let scrollTimer, lastScrollFireTime = 0;\r\n        const { fillColorFunction, residueColorStyle } = this;\r\n        /**\r\n         * unhighlight residue from event\r\n         * @param event\r\n         */\r\n        function unHighlightObject(event) {\r\n            if (typeof event.eventData != 'undefined') {\r\n                if (RamachandranComponent.highlightedResidues.indexOf(getResidueNode(event)) == -1) {\r\n                    d3.select('.selected-res')\r\n                        .classed('selected-res', false)\r\n                        .attr('d', (residue) => RamachandranComponent.changeObjectSize(residue)).transition().duration(50)\r\n                        .style('fill', (residue) => fillColorFunction(residue, residueColorStyle))\r\n                        .style('display', 'block');\r\n                    // .style('opacity', (d) => {\r\n                    //     return RamachandranComponent.computeOpacity(fillColorFunction(d, drawingType, outliersType, rsrz))\r\n                    // });\r\n                }\r\n            }\r\n        }\r\n        /**\r\n         * onClick event\r\n         * @param event\r\n         */\r\n        function onClick(event) {\r\n            const res = getResidueNode(event);\r\n            if (RamachandranComponent.highlightedResidues.length != 0) {\r\n                RamachandranComponent.highlightedResidues.forEach((node) => {\r\n                    node.attr('d', (residue) => RamachandranComponent.changeObjectSize(residue)).transition().duration(50)\r\n                        .style('fill', (residue) => fillColorFunction(residue, residueColorStyle))\r\n                        .style('display', 'block');\r\n                    // .style('opacity', (d) => {\r\n                    //     return RamachandranComponent.computeOpacity(fillColorFunction(d, drawingType, outliersType, rsrz))\r\n                    // });\r\n                });\r\n                RamachandranComponent.highlightedResidues.pop();\r\n            }\r\n            RamachandranComponent.highlightedResidues.push(res);\r\n            getResidueNode(event).attr('d', (residue) => RamachandranComponent.changeObjectSize(residue, false))\r\n                .classed('selected-res', false)\r\n                .style('fill', 'magenta')\r\n                .style('opacity', '1');\r\n        }\r\n        /**\r\n         * return residue node from event\r\n         * @param event\r\n         * @returns {Selection}\r\n         */\r\n        function getResidueNode(event) {\r\n            if (typeof event.eventData.chainId == 'undefined')\r\n                return null;\r\n            return d3.select('path#' +\r\n                event.eventData.residueName + '-' +\r\n                event.eventData.chainId + '-' +\r\n                event.eventData.entityId + '-' +\r\n                event.eventData.residueNumber);\r\n        }\r\n        /**\r\n         * highlight residue from event\r\n         * @param event\r\n         */\r\n        function highLightObject(event) {\r\n            let res = getResidueNode(event);\r\n            if (res) {\r\n                res.attr('d', (d) => RamachandranComponent.changeObjectSize(d, false))\r\n                    .classed('selected-res', true)\r\n                    .style('fill', 'yellow')\r\n                    .style('opacity', '1');\r\n                // .style('fill', (dat) => fillColorFunction(dat, drawingType, outliersType, rsrz));\r\n            }\r\n        }\r\n        window.addEventListener('PDB.topologyViewer.mouseover', (event) => {\r\n            const minMouseOverTime = 150;\r\n            let now = new Date().getTime();\r\n            function mouseOver(event) {\r\n                if (typeof event.eventData != 'undefined') {\r\n                    let res = getResidueNode(event);\r\n                    if (res) {\r\n                        if (res.attr('style').includes('magenta')) {\r\n                            return;\r\n                        }\r\n                    }\r\n                    unHighlightObject(event);\r\n                    highLightObject(event);\r\n                }\r\n                else {\r\n                    unHighlightObject(event);\r\n                }\r\n            }\r\n            if (!scrollTimer) {\r\n                if (now - lastScrollFireTime > (3 * minMouseOverTime)) {\r\n                    mouseOver(event); // fire immediately on first scroll\r\n                    lastScrollFireTime = now;\r\n                }\r\n                scrollTimer = setTimeout(function () {\r\n                    scrollTimer = null;\r\n                    lastScrollFireTime = new Date().getTime();\r\n                    mouseOver(event);\r\n                }, minMouseOverTime);\r\n            }\r\n        });\r\n        window.addEventListener('PDB.litemol.mouseover', (event) => {\r\n            if (typeof event.eventData != 'undefined') {\r\n                let res = getResidueNode(event);\r\n                if (res) {\r\n                    if (res.attr('style').includes('magenta')) {\r\n                        return;\r\n                    }\r\n                }\r\n                unHighlightObject(event);\r\n                highLightObject(event);\r\n            }\r\n            else {\r\n                unHighlightObject(event);\r\n            }\r\n        });\r\n        window.addEventListener('protvista.click', (d) => {\r\n            RamachandranComponent.hiddenResidues.forEach((residue) => {\r\n                if (residue.idSelector != '') {\r\n                    d3.select(`#${residue.idSelector}`)\r\n                        .style('visibility', 'visible');\r\n                }\r\n            });\r\n            if (this.lastSelection == d.detail) {\r\n                RamachandranComponent.hiddenResidues = [];\r\n                RamachandranComponent.selectedResidues = [];\r\n                this.lastSelection = {};\r\n                return;\r\n            }\r\n            this.lastSelection = d.detail;\r\n            this.pdbIds.forEach((pdbId) => {\r\n                RamachandranComponent.hiddenResidues = RamachandranComponent.residuesOnCanvas[pdbId].filter((residue) => {\r\n                    if (!(residue.authorResNum >= this.lastSelection.begin && residue.authorResNum <= this.lastSelection.end))\r\n                        return residue;\r\n                    else\r\n                        RamachandranComponent.selectedResidues.push(residue);\r\n                });\r\n            });\r\n            RamachandranComponent.hiddenResidues.forEach((residue) => {\r\n                if (residue.idSelector != '') {\r\n                    if (d3.select(`#${residue.idSelector}`).empty()) {\r\n                        return;\r\n                    }\r\n                    d3.select(`#${residue.idSelector}`).style('visibility', 'hidden');\r\n                }\r\n            });\r\n        });\r\n        /**\r\n         * add event listeners\r\n         */\r\n        clickEvents.forEach((type) => {\r\n            window.addEventListener(type, (event) => {\r\n                onClick(event);\r\n            });\r\n        });\r\n        mouseOutEvents.forEach((type) => {\r\n            window.addEventListener(type, (event) => {\r\n                if (RamachandranComponent.highlightedResidues.indexOf(event) > -1) {\r\n                    return;\r\n                }\r\n                unHighlightObject(event);\r\n            });\r\n        });\r\n    }\r\n    /**\r\n     * add summary infobelow the plot\r\n     */\r\n    addSummaryInfo() {\r\n        d3.selectAll('.rama-sum-table').remove();\r\n        d3.select('#rama-sum').append('table').classed('rama-sum-table', true).append('tr')\r\n            .classed('rama-sum-table-headline', true).append('th')\r\n            .text('PDB');\r\n        switch (this.residueColorStyle) {\r\n            case 1:\r\n                d3.select('.rama-sum-table-headline').append('th').text('Preferred regions')\r\n                    .attr('class', 'hint--top')\r\n                    .attr('data-hint', 'Regions with the most favorable combinations of \\u03C6 ' +\r\n                    'and \\u03C8 combination.');\r\n                d3.select('.rama-sum-table-headline').append('th').text('Allowed regions')\r\n                    .attr('class', 'hint--top')\r\n                    .attr('data-hint', 'Regions with allowed combinations of \\u03C6 and \\u03C8 combination.');\r\n                d3.select('.rama-sum-table-headline').append('th').text('Outliers')\r\n                    .attr('class', 'hint--top')\r\n                    .attr('data-hint', 'Regions with disallowed combinations of \\u03C6 and \\u03C8 combination.');\r\n                break;\r\n            case 2:\r\n                d3.select('.rama-sum-table-headline').append('th').text('Ramachandran outliers');\r\n                d3.select('.rama-sum-table-headline').append('th').text('Sidechain outliers');\r\n                d3.select('.rama-sum-table-headline').append('th').text('Clashes');\r\n                break;\r\n            case 3:\r\n                d3.select('.rama-sum-table-headline').append('th').text('RSRZ');\r\n                break;\r\n        }\r\n        RamachandranComponent.parsedPdb.forEach((pdb) => {\r\n            let resArrayLength = RamachandranComponent.residuesOnCanvas[pdb.pdbID].length;\r\n            if (resArrayLength == 0)\r\n                resArrayLength = 1;\r\n            switch (this.residueColorStyle) {\r\n                case 1:\r\n                    d3.select('.rama-sum-table').append('tr')\r\n                        .classed(`table-row-${pdb.pdbID}`, true).append('td').text(pdb.pdbID);\r\n                    d3.select(`.table-row-${pdb.pdbID}`).append('td')\r\n                        .text(`${String(RamachandranComponent.favored[pdb.pdbID])} \n                        (${String((RamachandranComponent.favored[pdb.pdbID] /\r\n                        resArrayLength * 100)\r\n                        .toFixed(0))} %)`);\r\n                    d3.select(`.table-row-${pdb.pdbID}`).append('td')\r\n                        .text(`${String(RamachandranComponent.allowed[pdb.pdbID])} \n                        (${String((RamachandranComponent.allowed[pdb.pdbID] /\r\n                        resArrayLength * 100)\r\n                        .toFixed(0))} %)`);\r\n                    d3.select(`.table-row-${pdb.pdbID}`).append('td')\r\n                        .text(`${String(RamachandranComponent.outliersList[pdb.pdbID].length)} \n                        (${String((RamachandranComponent.outliersList[pdb.pdbID].length /\r\n                        resArrayLength * 100).toFixed(0))} %)`);\r\n                    break;\r\n                case 2:\r\n                    d3.select('.rama-sum-table').append('tr').classed(`table-row-${pdb.pdbID}`, true)\r\n                        .append('td').text(pdb.pdbID);\r\n                    d3.select(`.table-row-${pdb.pdbID}`).append('td')\r\n                        .text(`${String(RamachandranComponent.ramachandranOutliers[pdb.pdbID])} \n                        (${String((RamachandranComponent.ramachandranOutliers[pdb.pdbID] / resArrayLength * 100)\r\n                        .toFixed(0))} %)`);\r\n                    d3.select(`.table-row-${pdb.pdbID}`).append('td')\r\n                        .text(`${String(RamachandranComponent.sideChainOutliers[pdb.pdbID])} \n                        (${String((RamachandranComponent.sideChainOutliers[pdb.pdbID]\r\n                        / resArrayLength * 100)\r\n                        .toFixed(0))} %)`);\r\n                    d3.select(`.table-row-${pdb.pdbID}`).append('td')\r\n                        .text(`${String(RamachandranComponent.clashes[pdb.pdbID])} \n                        (${String((RamachandranComponent.clashes[pdb.pdbID] / resArrayLength * 100)\r\n                        .toFixed(0))} %)`);\r\n                    break;\r\n                case 3:\r\n                    d3.select('.rama-sum-table').append('tr')\r\n                        .classed(`table-row-${pdb.pdbID}`, true)\r\n                        .append('td').text(pdb.pdbID);\r\n                    d3.select(`.table-row-${pdb.pdbID}`).append('td')\r\n                        .text(`${String((RamachandranComponent.rsrzCount[pdb.pdbID]))} \n                        (${String((RamachandranComponent.rsrzCount[pdb.pdbID]\r\n                        / resArrayLength * 100).toFixed(0))} %)`);\r\n            }\r\n        });\r\n        // switch (this.residueColorStyle){\r\n        //     case 1:\r\n        //         d3.selectAll('.rama-sum-table').remove();\r\n        //         d3.select('#rama-sum').append('table').classed('rama-sum-table', true).append('tr')\r\n        //             .classed('rama-sum-table-headline', true).append('th')\r\n        //             .text('PDB');\r\n        //         d3.select('.rama-sum-table-headline').append('th').text('Preferred regions');\r\n        //         d3.select('.rama-sum-table-headline').append('th').text('Allowed regions');\r\n        //         d3.select('.rama-sum-table-headline').append('th').text('Outliers');\r\n        //\r\n        //         RamachandranComponent.parsedPdb.forEach((pdb: ParsePDB) => {\r\n        //\r\n        //\r\n        //             d3.select('.rama-sum-table').append('tr')\r\n        //                 .classed(`table-row-${pdb.pdbID}`, true).append('td').text(pdb.pdbID);\r\n        //\r\n        //             d3.select(`.table-row-${pdb.pdbID}`).append('td')\r\n        //                 .text(`${String(pdb.favored)} (${String((pdb.favored / resArrayLength * 100)\r\n        //                     .toFixed(0))} %)`);\r\n        //\r\n        //             d3.select(`.table-row-${pdb.pdbID}`).append('td')\r\n        //                 .text(`${String(pdb.allowed)} (${String((pdb.allowed / resArrayLength * 100)\r\n        //                     .toFixed(0))} %)`);\r\n        //\r\n        //             d3.select(`.table-row-${pdb.pdbID}`).append('td')\r\n        //                 .text(`${String(pdb.outliersList.length)} (${String((pdb.outliersList\r\n        //                     .length / resArrayLength * 100).toFixed(0))} %)`);\r\n        //         });\r\n        //         break;\r\n        //     case 2:\r\n        //         d3.selectAll('.rama-sum-table').remove();\r\n        //         d3.select('#rama-sum').append('table').classed('rama-sum-table', true)\r\n        //             .append('tr').classed('rama-sum-table-headline', true).append('th')\r\n        //             .text('PDB');\r\n        //         d3.select('.rama-sum-table-headline').append('th').text('Ramachandran outliers');\r\n        //         d3.select('.rama-sum-table-headline').append('th').text('Sidechain outliers');\r\n        //         d3.select('.rama-sum-table-headline').append('th').text('Clashes');\r\n        //\r\n        //         RamachandranComponent.parsedPdb.forEach((pdb: ParsePDB) => {\r\n        //             let resArrayLength = RamachandranComponent.residuesOnCanvas[pdb.pdbID].length;\r\n        //             if (resArrayLength == 0)\r\n        //                 resArrayLength = 1;\r\n        //\r\n        //             d3.select('.rama-sum-table').append('tr').classed(`table-row-${pdb.pdbID}`, true)\r\n        //                 .append('td').text(pdb.pdbID);\r\n        //\r\n        //             d3.select(`.table-row-${pdb.pdbID}`).append('td')\r\n        //                 .text(`${String(pdb.ramaOutl)} (${String((pdb.ramaOutl / resArrayLength * 100)\r\n        //                     .toFixed(0))} %)`);\r\n        //\r\n        //             d3.select(`.table-row-${pdb.pdbID}`).append('td')\r\n        //                 .text(`${String(pdb.sidechainOutl)} (${String((pdb.sidechainOutl / resArrayLength * 100)\r\n        //                     .toFixed(0))} %)`);\r\n        //\r\n        //             d3.select(`.table-row-${pdb.pdbID}`).append('td')\r\n        //                 .text(`${String(pdb.clashes)} (${String((pdb.clashes / resArrayLength * 100)\r\n        //                     .toFixed(0))} %)`);\r\n        //         });\r\n        //         break;\r\n        //\r\n        //     case 3:\r\n        //         d3.selectAll('.rama-sum-table').remove();\r\n        //         d3.select('#rama-sum').append('table').classed('rama-sum-table', true).append('tr')\r\n        //             .classed('rama-sum-table-headline', true).append('th')\r\n        //             .text('PDB');\r\n        //         d3.select('.rama-sum-table-headline').append('th').text('RSRZ');\r\n        //\r\n        //         RamachandranComponent.parsedPdb.forEach((pdb: ParsePDB) => {\r\n        //             let resArrayLength = RamachandranComponent.residuesOnCanvas[pdb.pdbID].length;\r\n        //             if (resArrayLength == 0)\r\n        //                 resArrayLength = 1;\r\n        //\r\n        //             d3.select('.rama-sum-table').append('tr')\r\n        //                 .classed(`table-row-${pdb.pdbID}`, true)\r\n        //                 .append('td').text(pdb.pdbID);\r\n        //             d3.select(`.table-row-${pdb.pdbID}`).append('td')\r\n        //                 .text(`${String(Object.keys(pdb.rsrz).length)} (${String((Object.keys(pdb.rsrz).length\r\n        //                     / resArrayLength * 100).toFixed(0))} %)`);\r\n        //         });\r\n        // }\r\n        // switch (this.residueColorStyle) {\r\n        //     case 1:\r\n        //         d3.selectAll('#rama-sum-div').remove();\r\n        //         d3.select('#rama-sum').append('div').attr('id', 'rama-sum-div')\r\n        //             .append('div').attr('class', 'rama-sum-cell').attr('id', 'rama-sum-widest')\r\n        //             .text('Preferred regions: ' + String(RamachandranComponent.favored)\r\n        //                 + ' (' + String((RamachandranComponent.favored / resArrayLength * 100).toFixed(0))\r\n        //                 + '%)').enter();\r\n        //         d3.select('#rama-sum-div').append('div').attr('class', 'rama-sum-cell')\r\n        //             .attr('id', 'rama-sum-middle')\r\n        //             .text('Allowed regions: ' + String(RamachandranComponent.allowed)\r\n        //                 + ' (' + String((RamachandranComponent.allowed / resArrayLength * 100).toFixed(0))\r\n        //                 + '%)').enter();\r\n        //         d3.select('#rama-sum-div').append('div').attr('class', 'rama-sum-cell')\r\n        //             .attr('id', 'rama-sum-thinnest')\r\n        //             .text('Outliers: ' + String(RamachandranComponent.outliersList.length)\r\n        //                 + ' (' + String((RamachandranComponent.outliersList.length / resArrayLength * 100).toFixed(0)) + '%)').enter();\r\n        //\r\n        //         break;\r\n        //     case 2:\r\n        //         d3.selectAll('#rama-sum-div').remove();\r\n        //         d3.select('#rama-sum').append('div').attr('id', 'rama-sum-div')\r\n        //             .append('div').attr('class', 'rama-sum-cell').attr('id', 'rama-sum-widest')\r\n        //             .text('Ramachandran outliers: ' + String(this.ramachandranOutliers)\r\n        //                 + ' (' + String((this.ramachandranOutliers / resArrayLength * 100).toFixed(0)) +\r\n        //                 '%)').enter();\r\n        //         d3.select('#rama-sum-div').append('div').attr('class', 'rama-sum-cell')\r\n        //             .attr('id', 'rama-sum-middle')\r\n        //             .text('Sidechain outliers: ' + String(this.sidechainOutliers)\r\n        //                 + ' (' + String((this.sidechainOutliers / resArrayLength * 100).toFixed(0)) + '%)').enter();\r\n        //         d3.select('#rama-sum-div').append('div').attr('class', 'rama-sum-cell')\r\n        //             .attr('id', 'rama-sum-thinnest')\r\n        //             .text('Clashes: ' + String(this.clashes)\r\n        //                 + ' (' + String((this.clashes / resArrayLength * 100).toFixed(0)) + '%)').enter();\r\n        //         break;\r\n        //     case 3:\r\n        //         d3.selectAll('#rama-sum-div').remove();\r\n        //         d3.select('#rama-sum').append('div').attr('id', 'rama-sum-div')\r\n        //             .append('div').attr('class', 'rama-sum-cell').attr('id', 'rama-sum-widest')\r\n        //             .text('RSRZ: ' + String(this.rsrzCount)\r\n        //                 + ' (' + String((this.rsrzCount / resArrayLength * 100).toFixed(0)) + '%) ').enter();\r\n        //         break;\r\n        //     default:\r\n        //         return;\r\n        // }\r\n    }\r\n    /**\r\n     * compute summary stats of ramachandran diagram\r\n     * @param residue\r\n     */\r\n    static computeStats(residue) {\r\n        if (RamachandranComponent.outliersType[residue.pdbId][residue.num] != undefined) {\r\n            let outlTypeHelper = RamachandranComponent.outliersType[residue.pdbId][residue.num].outliersType;\r\n            if (outlTypeHelper.includes('clashes')) {\r\n                RamachandranComponent.clashes[residue.pdbId]++;\r\n            }\r\n            if (outlTypeHelper.includes('ramachandran_outliers')) {\r\n                RamachandranComponent.ramachandranOutliers[residue.pdbId]++;\r\n            }\r\n            if (outlTypeHelper.includes('sidechain_outliers')) {\r\n                RamachandranComponent.sideChainOutliers[residue.pdbId]++;\r\n            }\r\n        }\r\n        if (typeof RamachandranComponent.rsrz[residue.pdbId][residue.num] != 'undefined') {\r\n            RamachandranComponent.rsrzCount[residue.pdbId]++;\r\n        }\r\n    }\r\n    /**\r\n     * return fillColor which will be used\r\n     * @param residue - one residue\r\n     * @param {number} drawingType Default - 1/Quality - 2/ RSRZ - 3\r\n     * @returns {string} hex of color\r\n     */\r\n    fillColorFunction(residue, drawingType) {\r\n        // if (compute)\r\n        //     this.computeStats(residue);\r\n        switch (drawingType) {\r\n            case 1:\r\n                if (residue.rama === 'OUTLIER') {\r\n                    residue.residueColor = '#f00';\r\n                    return residue.residueColor;\r\n                }\r\n                residue.residueColor = '#000';\r\n                return residue.residueColor;\r\n            case 2:\r\n                if (typeof RamachandranComponent.outliersType[residue.pdbId][residue.num] === 'undefined') {\r\n                    residue.residueColor = '#008000';\r\n                    return residue.residueColor;\r\n                }\r\n                else {\r\n                    switch (RamachandranComponent.outliersType[residue.pdbId][residue.num].outliersType.length) {\r\n                        case 0:\r\n                            residue.residueColor = '#008000';\r\n                            return residue.residueColor;\r\n                        case 1:\r\n                            residue.residueColor = '#ff0';\r\n                            return residue.residueColor;\r\n                        case 2:\r\n                            residue.residueColor = '#f80';\r\n                            return residue.residueColor;\r\n                        default:\r\n                            residue.residueColor = '#850013';\r\n                            return residue.residueColor;\r\n                    }\r\n                }\r\n            case 3:\r\n                if (typeof RamachandranComponent.rsrz[residue.pdbId][residue.num] === 'undefined') {\r\n                    residue.residueColor = '#000';\r\n                    return residue.residueColor;\r\n                }\r\n                else {\r\n                    residue.residueColor = '#f00';\r\n                    return residue.residueColor;\r\n                }\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n    /**\r\n     * how opaque node will be\r\n     * @param fillColor\r\n     * @returns {number}\r\n     */\r\n    static computeOpacity(fillColor) {\r\n        if (fillColor == '#008000')\r\n            return 0.5;\r\n        if (fillColor == 'black' || fillColor == '#000')\r\n            return 0.15;\r\n        if (fillColor == '#ff0')\r\n            return 0.8;\r\n        return 1;\r\n    }\r\n    /**\r\n     * return timeoutid when hovering\r\n     * @param {number} ramaContourPlotType\r\n     * @param {string} aa\r\n     * @returns {number}\r\n     */\r\n    static getTimeout(ramaContourPlotType, aa = '') {\r\n        return window.setTimeout(() => {\r\n            RamachandranComponent.baseContours(ramaContourPlotType, RamachandranComponent.contourColoringStyle);\r\n            RamachandranComponent.changeOpacity(aa);\r\n        }, 600);\r\n    }\r\n    /**\r\n     * throw new event with defined data\r\n     * @param {string} name name of event\r\n     * @param {string} pdbId\r\n     * @param residue node\r\n     */\r\n    static dispatchCustomEvent(name, residue, pdbId) {\r\n        const event = new CustomEvent(name, { detail: {\r\n                chainId: residue.chainId,\r\n                entityId: residue.modelId,\r\n                entry: pdbId,\r\n                residueName: residue.aa,\r\n                residueNumber: residue.authorResNum\r\n            } });\r\n        window.dispatchEvent(event);\r\n    }\r\n    /**\r\n     * function for change contours after mouseout or mouseover\r\n     * @param residue selected node\r\n     * @param toDefault true if used for return to base state\r\n     * @param ramaContourPlotType\r\n     */\r\n    static changeContours(residue, toDefault = true, ramaContourPlotType) {\r\n        RamachandranComponent.currentTime = new Date().getTime();\r\n        switch (residue.aa) {\r\n            case 'ILE':\r\n            case 'VAL':\r\n                if (ramaContourPlotType != 2) {\r\n                    if (toDefault) {\r\n                        RamachandranComponent.baseContours(ramaContourPlotType, RamachandranComponent.contourColoringStyle);\r\n                        RamachandranComponent.changeOpacity('VAL,ILE', false);\r\n                    }\r\n                    else {\r\n                        RamachandranComponent.timeoutId = RamachandranComponent.getTimeout(2, 'VAL,ILE');\r\n                    }\r\n                }\r\n                return;\r\n            case 'GLY':\r\n                if (ramaContourPlotType != 4) {\r\n                    if (toDefault) {\r\n                        RamachandranComponent.baseContours(ramaContourPlotType, RamachandranComponent.contourColoringStyle);\r\n                        RamachandranComponent.changeOpacity('GLY', false);\r\n                    }\r\n                    else {\r\n                        RamachandranComponent.timeoutId = RamachandranComponent.getTimeout(4, 'GLY');\r\n                    }\r\n                }\r\n                return;\r\n            case 'PRO':\r\n                if (ramaContourPlotType < 5) {\r\n                    if (toDefault) {\r\n                        RamachandranComponent.baseContours(ramaContourPlotType, RamachandranComponent.contourColoringStyle);\r\n                        RamachandranComponent.changeOpacity('PRO', false);\r\n                    }\r\n                    else {\r\n                        if (residue.cisPeptide === null && residue.aa === 'PRO') {\r\n                            RamachandranComponent.timeoutId = RamachandranComponent.getTimeout(5, 'PRO');\r\n                            break;\r\n                        }\r\n                        if (residue.cisPeptide === 'Y' && residue.aa === 'PRO') {\r\n                            RamachandranComponent.timeoutId = RamachandranComponent.getTimeout(6, 'PRO');\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n                return;\r\n            default:\r\n                break;\r\n        }\r\n        if (residue.prePro) {\r\n            if (ramaContourPlotType != 3) {\r\n                if (toDefault) {\r\n                    RamachandranComponent.baseContours(ramaContourPlotType, RamachandranComponent.contourColoringStyle);\r\n                    RamachandranComponent.changeOpacity('', false);\r\n                }\r\n                else {\r\n                    RamachandranComponent.timeoutId = RamachandranComponent.getTimeout(3, '');\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * text for tooltip\r\n     * @param residue\r\n     * @returns {string}\r\n     */\r\n    static tooltipText(residue) {\r\n        // language=HTML\r\n        return `<b>${residue.pdbId.toUpperCase()}<br>${residue.chainId} ${residue.authorResNum} ${residue.aa}</b><br/>\\u03C6: ${residue.phi}<br/>\\u03C8: ${residue.psi}`;\r\n    }\r\n    /**\r\n     * change object size on hover\r\n     * @param residue\r\n     * @param {boolean} smaller\r\n     * @returns {string | null}\r\n     */\r\n    static changeObjectSize(residue, smaller = true) {\r\n        let objSize = 40;\r\n        if (window.screen.availWidth < 1920) {\r\n            objSize = 30;\r\n        }\r\n        if (window.screen.width < 350) {\r\n            objSize = 5;\r\n        }\r\n        let size = 175;\r\n        if (smaller) {\r\n            size = objSize;\r\n        }\r\n        if (residue.aa === 'GLY') {\r\n            RamachandranComponent.symbolTypes.triangle.size(size);\r\n            return RamachandranComponent.symbolTypes.triangle();\r\n        }\r\n        RamachandranComponent.symbolTypes.circle.size(size);\r\n        return RamachandranComponent.symbolTypes.circle();\r\n    }\r\n    /**\r\n     *\r\n     * @param residue\r\n     * @param {number} ramaContourPlotType\r\n     * @param {number} residueColorStyle\r\n     * @param tooltip\r\n     * @param changeCont\r\n     */\r\n    onMouseOverResidue(residue, ramaContourPlotType, residueColorStyle, tooltip, changeCont) {\r\n        let highlightColor = residue.residueColor;\r\n        if (residue.residueColor == '#000')\r\n            highlightColor = 'yellow';\r\n        RamachandranComponent.dispatchCustomEvent('PDB.ramaViewer.mouseOver', residue, residue.pdbId);\r\n        if (changeCont)\r\n            RamachandranComponent.changeContours(residue, false, ramaContourPlotType);\r\n        switch (residueColorStyle) {\r\n            case 1:\r\n                if (residue.rama === 'Favored') {\r\n                    tooltip.html(RamachandranComponent.tooltipText(residue) + '<br/> Favored');\r\n                }\r\n                if (residue.rama === 'Allowed') {\r\n                    tooltip.html(RamachandranComponent.tooltipText(residue) + '<br/> Allowed');\r\n                }\r\n                if (residue.rama === 'OUTLIER') {\r\n                    tooltip.html(RamachandranComponent.tooltipText(residue) + '<br/><b>OUTLIER</b>');\r\n                }\r\n                break;\r\n            case 2:\r\n                const outliersType = RamachandranComponent.outliersType[residue.pdbId];\r\n                let tempStr = '';\r\n                if (typeof outliersType[residue.num] === 'undefined') {\r\n                    tooltip.html(RamachandranComponent.tooltipText(residue));\r\n                    break;\r\n                }\r\n                let outlierTypeHelper = outliersType[residue.num].outliersType;\r\n                if (outlierTypeHelper.includes('clashes')) {\r\n                    tempStr += '<br/>Clash';\r\n                }\r\n                if (outlierTypeHelper.includes('ramachandran_outliers')) {\r\n                    tempStr += '<br/>Ramachandran outlier';\r\n                    RamachandranComponent.tooltipWidth = 130;\r\n                }\r\n                if (outlierTypeHelper.includes('sidechain_outliers')) {\r\n                    tempStr += '<br/>Sidechain outlier';\r\n                    RamachandranComponent.tooltipWidth = 100;\r\n                }\r\n                if (outlierTypeHelper.includes('bond_angles')) {\r\n                    tempStr += '<br/>Bond angles';\r\n                }\r\n                else {\r\n                    tooltip.html(RamachandranComponent.tooltipText(residue));\r\n                }\r\n                switch (RamachandranComponent.outliersType[residue.pdbId][residue.num].outliersType.length) {\r\n                    case 2:\r\n                        RamachandranComponent.tooltipHeight = 68;\r\n                        break;\r\n                    case 3:\r\n                        RamachandranComponent.tooltipHeight = 78;\r\n                        break;\r\n                    default:\r\n                        break;\r\n                }\r\n                tooltip.html(RamachandranComponent.tooltipText(residue) + tempStr);\r\n                break;\r\n            case 3:\r\n                if (typeof RamachandranComponent.rsrz[residue.pdbId][residue.num] === 'undefined') {\r\n                    tooltip.html(RamachandranComponent.tooltipText(residue));\r\n                }\r\n                else {\r\n                    tooltip.html(RamachandranComponent.tooltipText(residue) + '<br/><b>RSRZ outlier</b>');\r\n                }\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        if (changeCont) {\r\n            tooltip.transition()\r\n                .style('opacity', .95)\r\n                .style('left', (d3.event.pageX + 10) + 'px')\r\n                .style('top', (d3.event.pageY - 48) + 'px')\r\n                .style('height', RamachandranComponent.tooltipHeight)\r\n                .style('width', String(RamachandranComponent.tooltipWidth) + 'px');\r\n        }\r\n        d3.select(`#${residue.idSelector}`)\r\n            .attr('d', (residue) => RamachandranComponent.changeObjectSize(residue, false))\r\n            .style('fill', highlightColor)\r\n            .style('opacity', 1);\r\n        // .style('fill', (dat) => fillColorFunction(dat, drawingType, outliersType, rsrz));\r\n    }\r\n    /**\r\n     *\r\n     * @param residue\r\n     * @param {number} ramaContourPlotType\r\n     * @param {number} residueColorStyle\r\n     * @param tooltip\r\n     * @param changeCount\r\n     */\r\n    onMouseOutResidue(residue, ramaContourPlotType, residueColorStyle, tooltip, changeCount) {\r\n        let outTime = new Date().getTime();\r\n        RamachandranComponent.dispatchCustomEvent('PDB.ramaViewer.mouseOut', residue, residue.pdbId);\r\n        if (RamachandranComponent.highlightedResidues.indexOf(residue) > -1) {\r\n            return;\r\n        }\r\n        d3.select(`#${residue.idSelector}`)\r\n            .transition()\r\n            .attr('d', (dat) => RamachandranComponent.changeObjectSize(dat))\r\n            .style('fill', residue.residueColor)\r\n            .style('opacity', () => {\r\n            return RamachandranComponent.computeOpacity(residue.residueColor);\r\n        });\r\n        if (changeCount) {\r\n            tooltip.transition()\r\n                .style('opacity', 0);\r\n            if ((outTime - RamachandranComponent.currentTime) > 600) {\r\n                window.setTimeout(() => {\r\n                    RamachandranComponent.changeContours(residue, true, ramaContourPlotType);\r\n                }, 50);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * change residue coloring\r\n     * @param {number} residueColorStyle\r\n     */\r\n    changeResiduesColors(residueColorStyle) {\r\n        let { tooltip, onMouseOverResidue, ramaContourPlotType, onMouseOutResidue } = this;\r\n        this.pdbIds.forEach((pdbId) => {\r\n            let resArray = RamachandranComponent.residuesOnCanvas[pdbId];\r\n            if (RamachandranComponent.selectedResidues.length != 0) {\r\n                resArray = RamachandranComponent.selectedResidues.slice(0);\r\n            }\r\n            resArray.forEach((residue) => {\r\n                if (residue.idSelector != '') {\r\n                    const node = d3.select(`#${residue.idSelector}`);\r\n                    node.style('fill', this.fillColorFunction(residue, residueColorStyle));\r\n                    node.style('opacity', (residue) => {\r\n                        return RamachandranComponent.computeOpacity(this.fillColorFunction(residue, residueColorStyle));\r\n                    });\r\n                    node.on('mouseover', function () {\r\n                        if (d3.select(`#${residue.idSelector}`).style('opacity') == '0')\r\n                            return;\r\n                        onMouseOverResidue(residue, ramaContourPlotType, residueColorStyle, tooltip, true);\r\n                    });\r\n                    node.on('mouseout', function () {\r\n                        if (d3.select(`#${residue.idSelector}`).style('opacity') == '0')\r\n                            return;\r\n                        window.clearTimeout(RamachandranComponent.timeoutId);\r\n                        onMouseOutResidue(residue, ramaContourPlotType, residueColorStyle, tooltip, true);\r\n                    });\r\n                }\r\n            });\r\n        });\r\n    }\r\n    /**\r\n     * sort json object to that it can be better displayed\r\n     * @param jsonObject\r\n     * @param {number} drawingType\r\n     * @param {Dictionary} outliersType\r\n     * @param {Dictionary} rsrz\r\n     */\r\n    sortJson(jsonObject, drawingType, outliersType, rsrz) {\r\n        jsonObject.sort((a, b) => {\r\n            // switch (drawingType) {\r\n            //     case 1:\r\n            //         if (a.rama === 'OUTLIER') {\r\n            //             if (b.rama === 'Allowed') {\r\n            //                 return 1;\r\n            //             }\r\n            //             if (b.rama === 'Favored') {\r\n            //                 return 1;\r\n            //             }\r\n            //             if (b.rama === 'OUTLIER') {\r\n            //                 return 0;\r\n            //             }\r\n            //         }\r\n            //         if (a.rama === 'Allowed') {\r\n            //             if (b.rama === 'Allowed') {\r\n            //                 return 0;\r\n            //             }\r\n            //             if (b.rama === 'Favored') {\r\n            //                 return 1;\r\n            //             }\r\n            //             if (b.rama === 'OUTLIER') {\r\n            //                 return -1;\r\n            //             }\r\n            //         }\r\n            //         if (a.rama === 'Favored') {\r\n            //             if (b.rama === 'Allowed') {\r\n            //                 return -1;\r\n            //             }\r\n            //             if (b.rama === 'Favored') {\r\n            //                 return 0;\r\n            //             }\r\n            //             if (b.rama === 'OUTLIER') {\r\n            //                 return -1;\r\n            //             }\r\n            //         }\r\n            //         break;\r\n            //     case 2:\r\n            if (typeof rsrz[a.num] != 'undefined') {\r\n                return 1;\r\n            }\r\n            else if (typeof rsrz[b.num] != 'undefined') {\r\n                return -1;\r\n            }\r\n            else if (typeof outliersType[a.num] == 'undefined') {\r\n                return -1;\r\n            }\r\n            else if (typeof outliersType[b.num] == 'undefined') {\r\n                return 1;\r\n            }\r\n            else if (outliersType[a.num].outliersType.length > outliersType[b.num].outliersType.length) {\r\n                return 1;\r\n            }\r\n            else {\r\n                return -1;\r\n            }\r\n            //     case 3:\r\n            //         if (typeof rsrz[a.num] === 'undefined') {\r\n            //             return -1;\r\n            //         } else if (typeof  rsrz[b.num] === 'undefined') {\r\n            //             return 1;\r\n            //         } else {\r\n            //             return 1;\r\n            //         }\r\n            //     default:\r\n            //         break;\r\n            // }\r\n        });\r\n    }\r\n    /**\r\n     * function to change opacity while hovering\r\n     * @param {string} residuesString\r\n     * @param {boolean} makeInvisible\r\n     */\r\n    static changeOpacity(residuesString, makeInvisible = true) {\r\n        let residues = residuesString.split(',');\r\n        let nodes;\r\n        let firstRun = true;\r\n        RamachandranComponent.parsedPdb.forEach((pdb) => {\r\n            let resArray = RamachandranComponent.residuesOnCanvas[pdb.pdbID].slice(0);\r\n            if (RamachandranComponent.selectedResidues.length != 0) {\r\n                resArray = RamachandranComponent.selectedResidues.slice(0);\r\n            }\r\n            if (residuesString == '') {\r\n                nodes = resArray.filter((residue) => {\r\n                    if (residue.prePro != true)\r\n                        return residue;\r\n                });\r\n            }\r\n            else if (residues.length > 1) {\r\n                nodes = resArray.filter((residue) => {\r\n                    return (residues.indexOf(residue.aa) == -1);\r\n                });\r\n            }\r\n            else {\r\n                nodes = resArray.filter((residue) => {\r\n                    return (residue.aa != residuesString);\r\n                });\r\n            }\r\n            nodes.forEach((residue) => {\r\n                if (residue.idSelector == '')\r\n                    return;\r\n                let node = d3.select(`#${residue.idSelector}`);\r\n                if (makeInvisible)\r\n                    node.style('display', 'none');\r\n                else\r\n                    node.style('display', 'block');\r\n                if (firstRun) {\r\n                    d3.selectAll('line.rama-distance').each((line) => {\r\n                        if (line.templateResidue.authorResNum == residue.authorResNum) {\r\n                            if (makeInvisible)\r\n                                d3.select(`#${line.id}`).style('display', 'none');\r\n                            else\r\n                                d3.select(`#${line.id}`).style('display', 'block');\r\n                        }\r\n                        // console.log(line);\r\n                        // if (line.templateResidue.authorResNum == node.data()[0].authorResNum) {\r\n                        //\r\n                        // }\r\n                    });\r\n                    // console.log();\r\n                }\r\n            });\r\n        });\r\n    }\r\n    /**\r\n     * clearContourCanvas\r\n     */\r\n    static clearCanvas() {\r\n        d3.select('#rama-canvas').empty();\r\n        d3.selectAll('.contour-line').remove();\r\n    }\r\n    /**\r\n     * add outliers table\r\n     */\r\n    addTable() {\r\n        this.outliersTable = d3.select('.outliers-container').append('div')\r\n            .attr('class', 'outliers').append('table')\r\n            .attr('class', 'table table-hover table-responsive');\r\n        d3.select('.outliers-container').append('table')\r\n            .attr('class', 'rama-outliers-table').append('thead').append('tr').attr('id', 'tab-headline');\r\n        d3.select('#tab-headline').append('th').attr('class', 'rama-table-headline').text('Chain')\r\n            .style('width', '30%').style('min-width', '50px').style('text-align', 'right');\r\n        d3.select('#tab-headline').append('th').attr('class', 'rama-table-headline').text('ID')\r\n            .style('width', '30%').style('min-width', '50px').style('text-align', 'right');\r\n        d3.select('#tab-headline').append('th').attr('class', 'rama-table-headline').text('AA')\r\n            .style('width', '30%').style('min-width', '50px').style('text-align', 'right');\r\n        d3.select('#tab-headline').append('th').attr('class', 'rama-table-headline').text('Phi')\r\n            .style('width', '30%').style('min-width', '50px').style('text-align', 'right');\r\n        d3.select('#tab-headline').append('th').attr('class', 'rama-table-headline').text('Psi')\r\n            .style('width', '30%').style('min-width', '50px').style('text-align', 'right');\r\n    }\r\n    /**\r\n     * fill outliers table\r\n     * @param {any[]} sortedTable\r\n     * @param {number} drawingType\r\n     */\r\n    fillTable(sortedTable, drawingType) {\r\n        let objSize = 40;\r\n        const { fillColorFunction } = this;\r\n        if (window.screen.availWidth < 1920) {\r\n            objSize = 30;\r\n        }\r\n        if (window.screen.width < 350) {\r\n            objSize = 5;\r\n        }\r\n        const symbolTypes = {\r\n            circle: d3.symbol().type(d3.symbolCircle).size(30),\r\n            triangle: d3.symbol().type(d3.symbolTriangle).size(30)\r\n        };\r\n        const rows = this.outliersTable.selectAll('tbody tr')\r\n            .data(sortedTable, (d) => d.num);\r\n        rows.enter()\r\n            .append('tr')\r\n            .on('mouseover', function (d) {\r\n            d3.select(this)\r\n                .style('background-color', '#b4bed6')\r\n                .style('cursor', 'pointer');\r\n            d3.select('#' + '-' + d.chainId + '-' + d.modelId + '-' + d.num)\r\n                .attr('d', (dat) => {\r\n                if (dat.aa === 'GLY') {\r\n                    symbolTypes.triangle.size(175);\r\n                    return symbolTypes.triangle();\r\n                }\r\n                symbolTypes.circle.size(175);\r\n                return symbolTypes.circle();\r\n            })\r\n                .style('fill', (residue) => fillColorFunction(residue, drawingType));\r\n        })\r\n            //\r\n            .on('mouseout', function (residue) {\r\n            d3.select(this)\r\n                .style('background-color', 'transparent')\r\n                .style('cursor', 'default');\r\n            // d3.select('#' +  d.aa + '-' + d.chainId + '-' + d.modelId + '-' + d.num + d.pdbId)\r\n            d3.select(`#${residue.aa}-${residue.chainId}-${residue.modelId}-${residue.num}-${residue.pdbId}`)\r\n                .transition()\r\n                // .duration(50)\r\n                .attr('d', (dat) => {\r\n                if (dat.aa === 'GLY') {\r\n                    symbolTypes.triangle.size(objSize);\r\n                    return symbolTypes.triangle();\r\n                }\r\n                symbolTypes.circle.size(objSize);\r\n                return symbolTypes.circle();\r\n            })\r\n                .style('fill', (residue) => fillColorFunction(residue, drawingType))\r\n                .style('fillColorFunction-width', '0.5');\r\n        })\r\n            .selectAll('td')\r\n            .data((d) => [d.chainId, d.num, d.aa, d.phi, d.psi])\r\n            .enter()\r\n            .append('td')\r\n            .attr('id', 'rama-td')\r\n            .style('width', '30%')\r\n            .style('min-width', '50px')\r\n            .style('text-align', 'right')\r\n            .text((d) => d);\r\n        rows.exit().remove();\r\n        //\r\n        const cells = rows.selectAll('td')\r\n            .data((d) => [d.chainId, d.num, d.aa, d.phi, d.psi])\r\n            .text((d) => d);\r\n        //\r\n        cells.enter()\r\n            .append('td')\r\n            .text((d) => d);\r\n        cells.exit().remove();\r\n    }\r\n}\r\nRamachandranComponent.rsrz = {};\r\nRamachandranComponent.outliersType = {};\r\nRamachandranComponent.residuesOnCanvas = {};\r\nRamachandranComponent.ramachandranOutliers = {};\r\nRamachandranComponent.sideChainOutliers = {};\r\nRamachandranComponent.clashes = {};\r\nRamachandranComponent.rsrzCount = {};\r\nRamachandranComponent.favored = {};\r\nRamachandranComponent.allowed = {};\r\nRamachandranComponent.outliersList = {};\r\nwindow.customElements.define('ramachandran-component', RamachandranComponent);\r\n"]}