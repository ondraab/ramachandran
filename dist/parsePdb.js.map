{"version":3,"sources":["../parsePdb.ts.js"],"names":["Object","defineProperty","exports","value","Res","aa","phi","psi","rama","chain","num","cisPeptide","modelId","spProp","idSlector","ParsePDB","pdb","_rsrz","_outlDict","pdbID","toLowerCase","_chainsArray","_modelArray","_residueArray","prototype","downloadAndParse","xmlHttp","XMLHttpRequest","open","send","status","molecules","JSON","parse","responseText","_i","_a","length","mol","_b","_c","chains","_d","_e","models","mod","chainsArray","indexOf","chain_id","push","modelArray","model_id","_f","_g","residues","resid","residue_name","residue_number","cis_peptide","mols","_h","_j","_k","_l","_m","_o","_p","_q","res","outlier_types","outliersType","get","enumerable","configurable","default"],"mappings":"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","file":"parsePdb.ts.js","sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Res = (function () {\r\n    function Res(aa, phi, psi, rama, chain, num, cisPeptide, modelId) {\r\n        this.aa = aa;\r\n        this.phi = phi;\r\n        this.psi = psi;\r\n        this.rama = rama;\r\n        this.chain = chain;\r\n        this.num = num;\r\n        this.cisPeptide = cisPeptide;\r\n        this.modelId = modelId;\r\n        this.spProp = false;\r\n        this.idSlector = '';\r\n    }\r\n    return Res;\r\n}());\r\nvar ParsePDB = (function () {\r\n    function ParsePDB(pdb) {\r\n        this._rsrz = {};\r\n        this._outlDict = {};\r\n        this.pdbID = pdb.toLowerCase();\r\n        this._chainsArray = [];\r\n        this._modelArray = [];\r\n        this._residueArray = [];\r\n    }\r\n    ParsePDB.prototype.downloadAndParse = function () {\r\n        var xmlHttp = new XMLHttpRequest();\r\n        xmlHttp.open('GET', 'http://www.ebi.ac.uk/pdbe/api/validation/rama_sidechain_listing/entry/' + this.pdbID, false);\r\n        xmlHttp.send();\r\n        if (xmlHttp.status !== 200) {\r\n            return;\r\n        }\r\n        else {\r\n            var molecules = JSON.parse(xmlHttp.responseText)[this.pdbID];\r\n            for (var _i = 0, _a = molecules.molecules; _i < _a.length; _i++) {\r\n                var mol = _a[_i];\r\n                for (var _b = 0, _c = mol.chains; _b < _c.length; _b++) {\r\n                    var chain = _c[_b];\r\n                    for (var _d = 0, _e = chain.models; _d < _e.length; _d++) {\r\n                        var mod = _e[_d];\r\n                        if (this.chainsArray.indexOf(chain.chain_id) === -1) {\r\n                            this.chainsArray.push(chain.chain_id);\r\n                        }\r\n                        if (this.modelArray.indexOf(mod.model_id) === -1) {\r\n                            this._modelArray.push(mod.model_id);\r\n                        }\r\n                        for (var _f = 0, _g = mod.residues; _f < _g.length; _f++) {\r\n                            var resid = _g[_f];\r\n                            this._residueArray.push(new Res(resid.residue_name, resid.phi, resid.psi, resid.rama, chain.chain_id, resid.residue_number, resid.cis_peptide, mod.model_id));\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            xmlHttp.open('GET', 'https://www.ebi.ac.uk/pdbe/api/validation/residuewise_outlier_summary/entry/' + this.pdbID, false);\r\n            xmlHttp.send();\r\n            var mols = JSON.parse(xmlHttp.responseText)[this.pdbID];\r\n            for (var _h = 0, _j = mols.molecules; _h < _j.length; _h++) {\r\n                var mol = _j[_h];\r\n                for (var _k = 0, _l = mol.chains; _k < _l.length; _k++) {\r\n                    var chain = _l[_k];\r\n                    for (var _m = 0, _o = chain.models; _m < _o.length; _m++) {\r\n                        var mod = _o[_m];\r\n                        for (var _p = 0, _q = mod.residues; _p < _q.length; _p++) {\r\n                            var res = _q[_p];\r\n                            if (res.outlier_types[0] === 'RSRZ') {\r\n                                this._rsrz[res.residue_number] = { outliersType: res.outlier_types };\r\n                            }\r\n                            else {\r\n                                this._outlDict[res.residue_number] = { outliersType: res.outlier_types };\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n    Object.defineProperty(ParsePDB.prototype, \"chainsArray\", {\r\n        get: function () {\r\n            return this._chainsArray;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ParsePDB.prototype, \"modelArray\", {\r\n        get: function () {\r\n            return this._modelArray;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ParsePDB.prototype, \"residueArray\", {\r\n        get: function () {\r\n            return this._residueArray;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ParsePDB.prototype, \"rsrz\", {\r\n        get: function () {\r\n            return this._rsrz;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ParsePDB.prototype, \"outlDict\", {\r\n        get: function () {\r\n            return this._outlDict;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return ParsePDB;\r\n}());\r\nexports.ParsePDB = ParsePDB;\r\nexports.default = ParsePDB;\r\n"]}